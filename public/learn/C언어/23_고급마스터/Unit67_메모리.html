<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Unit 67. ë™ì  ë©”ëª¨ë¦¬ + ê³ ê¸‰ í¬ì¸í„° â€” C ì–¸ì–´</title>
    <link rel="stylesheet" href="../common.css">
</head>

<body>
    <div class="wrap">
        <div class="hdr">
            <h1>Unit 67. ë™ì  ë©”ëª¨ë¦¬ + ê³ ê¸‰ í¬ì¸í„°</h1>
            <div class="sub">malloc/calloc/realloc/free Â· void í¬ì¸í„° Â· í•¨ìˆ˜ í¬ì¸í„° ë°°ì—´</div>
            <span class="unit-badge">Chapter 23 Â· ê³ ê¸‰ ë§ˆìŠ¤í„°</span>
            <div class="level-bar"><span class="on"></span><span class="on"></span><span class="on"></span><span
                    class="on"></span></div>
            <div class="meta"><span class="tag pri">ğŸ§  ë©”ëª¨ë¦¬</span><span class="tag acc">ğŸ“ 15ë¬¸ì œ</span><span class="tag">â±
                    50ë¶„</span></div>
        </div>
        <div class="stu-bar"><label>ğŸ‘¤ ì´ë¦„ <input type="text" id="stu-name" placeholder="ì´ë¦„"></label><label>ğŸ“… ë‚ ì§œ <input
                    type="date" id="stu-date"></label></div>
        <div id="problems"></div>
        <div class="submit-section">
            <p>ëª¨ë“  ë¬¸ì œë¥¼ í’€ì—ˆë‚˜ìš”? ğŸ“¨</p><button class="btn-submit" id="btn-submit">ğŸ“„ ì œì¶œí•˜ê¸°</button>
        </div>
        <div class="modal-overlay" id="submit-modal">
            <div class="modal-box">
                <div class="modal-icon">âœ…</div>
                <h3>ì œì¶œ ì™„ë£Œ!</h3>
                <p>í•™ìŠµì§€ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <div style="margin:12px 0"><span class="info-tag" id="modal-name"></span> <span class="info-tag"
                        id="modal-date"></span> <span class="info-tag" id="modal-count"></span></div>
                <p style="font-size:.78rem;color:var(--dim)">ğŸ“ <strong id="modal-filename"></strong></p><button
                    class="btn-close-modal" id="btn-close-modal">í™•ì¸</button>
            </div>
        </div>
        <div class="pg"><a href="../22_ìë£Œêµ¬ì¡°ì‹¬í™”/Unit66_ìŠ¤íƒííŠ¸ë¦¬.html">â† Unit 66</a><span class="tag active">Unit 67</span><a
                href="Unit68_ë§ˆìŠ¤í„°í…ŒìŠ¤íŠ¸.html">Unit 68 â†’</a></div>
        <div class="ft">ğŸ§  ë™ì  ë©”ëª¨ë¦¬ + ê³ ê¸‰ í¬ì¸í„° Â· Unit 67</div>
    </div>
    <script>
        const P = [
            {
                n: 1, t: "malloc ê¸°ë³¸", d: 2,
                q: `ì •ìˆ˜ Nê°œë¥¼ ìœ„í•œ ë™ì  ë°°ì—´ì„ í• ë‹¹í•˜ì„¸ìš”.
<pre class="code-c">int n = 5;
int *arr = <span class="cm">/* ? */</span>;
<span class="cm">// arr[0]~arr[4] ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ</span>
<span class="cm">// ë‹¤ ì“´ í›„ í•´ì œ</span></pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">int *arr = (int*)malloc(n * sizeof(int));
if (arr == NULL) { printf("í• ë‹¹ ì‹¤íŒ¨!"); return 1; }
for (int i=0; i<n; i++) arr[i] = i * 10;
free(arr); <span class="cm">// ë°˜ë“œì‹œ í•´ì œ!</span></pre><div class="trace">malloc: ì´ˆê¸°í™” ì•ˆ ë¨ (ì“°ë ˆê¸°ê°’!)<br>ë°˜í™˜ê°’ NULL ì²´í¬ í•„ìˆ˜<br>free í›„ arr ì‚¬ìš© ê¸ˆì§€ (ëŒ•ê¸€ë§)</div>`},

            {
                n: 2, t: "calloc vs malloc", d: 2,
                q: `callocìœ¼ë¡œ 0ìœ¼ë¡œ ì´ˆê¸°í™”ëœ ë°°ì—´ì„ í• ë‹¹í•˜ì„¸ìš”.
<pre class="code-c">int *a = (int*)malloc(5 * sizeof(int));
int *b = <span class="cm">/* callocìœ¼ë¡œ ê°™ì€ í¬ê¸° */</span>;
<span class="cm">// aì™€ bì˜ ì°¨ì´ëŠ”?</span></pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">int *b = (int*)calloc(5, sizeof(int));</pre><div class="trace"><span class="val">malloc</span>: ì´ˆê¸°í™” ì•ˆ ë¨ (ì“°ë ˆê¸°ê°’)<br><span class="val">calloc</span>: 0ìœ¼ë¡œ ì´ˆê¸°í™”!<br><br>calloc(ê°œìˆ˜, í¬ê¸°) = malloc(ê°œìˆ˜Ã—í¬ê¸°) + memset(0)</div>`
            },

            {
                n: 3, t: "realloc í¬ê¸° ë³€ê²½", d: 2,
                q: `ë°°ì—´ì„ 5ê°œì—ì„œ 10ê°œë¡œ í™•ì¥í•˜ì„¸ìš”.
<pre class="code-c">int *arr = (int*)malloc(5 * sizeof(int));
for (int i=0;i<5;i++) arr[i] = i;
<span class="cm">// 10ê°œë¡œ í™•ì¥ (ê¸°ì¡´ ê°’ ìœ ì§€!)</span>
arr = <span class="cm">/* ? */</span>;</pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">int *temp = (int*)realloc(arr, 10 * sizeof(int));
if (temp) arr = temp;
else { printf("í™•ì¥ ì‹¤íŒ¨!"); free(arr); }</pre><div class="trace">âš ï¸ realloc(arr, ...) ì§ì ‘ ëŒ€ì… ê¸ˆì§€!<br>ì‹¤íŒ¨ ì‹œ arrì´ NULLì´ ë˜ì–´ ì›ë³¸ë„ ìƒìŒ<br>â†’ tempì— ë°›ê³  NULL ì²´í¬ í›„ ëŒ€ì…</div>`},

            {
                n: 4, t: "2ì°¨ì› ë™ì  ë°°ì—´", d: 3,
                q: `NÃ—M í¬ê¸°ì˜ 2ì°¨ì› ë°°ì—´ì„ ë™ì  í• ë‹¹í•˜ì„¸ìš”.
<pre class="code-c">int n=3, m=4;
<span class="cm">// int **arr í˜•íƒœë¡œ nÃ—m ë°°ì—´ í• ë‹¹</span>
<span class="cm">// ì‚¬ìš© í›„ í•´ì œ</span></pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c"><span class="cm">// í• ë‹¹</span>
int **arr = (int**)malloc(n * sizeof(int*));
for (int i=0; i<n; i++)
    arr[i] = (int*)malloc(m * sizeof(int));

<span class="cm">// ì‚¬ìš©</span>
arr[1][2] = 42;

<span class="cm">// í•´ì œ (ì—­ìˆœ!)</span>
for (int i=0; i<n; i++) free(arr[i]);
free(arr);</pre><div class="trace">í¬ì¸í„° ë°°ì—´ â†’ ê° í–‰ì„ ê°œë³„ í• ë‹¹<br>í•´ì œ: í–‰ ë¨¼ì € free â†’ ë°°ì—´ í¬ì¸í„° free<br>ìˆœì„œ í‹€ë¦¬ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜!</div>`},

            {
                n: 5, t: "ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì°¾ê¸°", d: 2,
                q: `ì•„ë˜ ì½”ë“œì˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ì°¾ê³  ê³ ì¹˜ì„¸ìš”.
<pre class="code-c">void process() {
    int *a = (int*)malloc(100 * sizeof(int));
    int *b = (int*)malloc(200 * sizeof(int));
    if (a[0] == 0) return;  <span class="cm">// ğŸ›</span>
    free(a);
    free(b);
}</pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">void process() {
    int *a = (int*)malloc(100 * sizeof(int));
    int *b = (int*)malloc(200 * sizeof(int));
    if (a[0] == 0) {
        <span class="err">free(a); free(b);</span> <span class="cm">// ìˆ˜ì •!</span>
        return;
    }
    free(a);
    free(b);
}</pre><div class="trace">ì›ë˜ ì½”ë“œ: ì¡°ê±´ë¶€ returnì—ì„œ free ì—†ìŒ!<br>â†’ a, b ëª¨ë‘ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜<br>ëª¨ë“  íƒˆì¶œ ê²½ë¡œì—ì„œ free í•„ìˆ˜!</div>`},

            {
                n: 6, t: "void í¬ì¸í„° (ì œë„¤ë¦­)", d: 2,
                q: `void*ë¥¼ ì‚¬ìš©í•œ ë²”ìš© swap í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
<pre class="code-c">void genericSwap(void *a, void *b, size_t size) {
    <span class="cm">// ì–´ë–¤ íƒ€ì…ì´ë“  êµí™˜</span>
}</pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">void genericSwap(void *a, void *b, size_t size) {
    void *temp = malloc(size);
    memcpy(temp, a, size);
    memcpy(a, b, size);
    memcpy(b, temp, size);
    free(temp);
}
<span class="cm">// ì‚¬ìš©:</span>
int x=10, y=20;
genericSwap(&x, &y, sizeof(int));
double a=1.5, b=2.5;
genericSwap(&a, &b, sizeof(double));</pre><div class="trace">void*: ì–´ë–¤ íƒ€ì…ì´ë“  ê°€ë¦¬í‚¬ ìˆ˜ ìˆìŒ<br>size: ë°”ì´íŠ¸ ìˆ˜ë¡œ í¬ê¸° ì „ë‹¬<br>memcpy: ë©”ëª¨ë¦¬ ë³µì‚¬ (ë°”ì´íŠ¸ ë‹¨ìœ„)</div>`},

            {
                n: 7, t: "í•¨ìˆ˜ í¬ì¸í„° ë°°ì—´", d: 3,
                q: `ì‚¬ì¹™ì—°ì‚° í•¨ìˆ˜ í¬ì¸í„° ë°°ì—´ì„ ë§Œë“œì„¸ìš”.
<pre class="code-c">int add(int a,int b){return a+b;}
int sub(int a,int b){return a-b;}
int mul(int a,int b){return a*b;}
int divi(int a,int b){return a/b;}
<span class="cm">// í•¨ìˆ˜ í¬ì¸í„° ë°°ì—´ë¡œ ì„ íƒ í˜¸ì¶œ</span></pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">int main() {
    int (*ops[4])(int,int) = {add,sub,mul,divi};
    char *names[] = {"+","-","*","/"};
    for (int i=0;i<4;i++)
        printf("10 %s 3 = %d\\n", names[i], ops[i](10,3));
}</pre><div class="trace">int (*ops[4])(int,int): 4ê°œ í•¨ìˆ˜í¬ì¸í„° ë°°ì—´<br>ops[0](10,3) = add(10,3) = 13<br>ë°°ì—´ ì¸ë±ìŠ¤ë¡œ í•¨ìˆ˜ ì„ íƒ ê°€ëŠ¥!</div>`},

            {
                n: 8, t: "ì½œë°± í•¨ìˆ˜ íŒ¨í„´", d: 3,
                q: `ì½œë°± í•¨ìˆ˜ë¥¼ ë°›ëŠ” forEachë¥¼ ì‘ì„±í•˜ì„¸ìš”.
<pre class="code-c"><span class="cm">// ë°°ì—´ì˜ ê° ì›ì†Œì— í•¨ìˆ˜ë¥¼ ì ìš©</span>
void forEach(int arr[], int n, void (*fn)(int)) {
    <span class="cm">/* ? */</span>
}
void printDouble(int x) { printf("%d ", x*2); }</pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">void forEach(int arr[], int n, void (*fn)(int)) {
    for (int i=0; i<n; i++) fn(arr[i]);
}
int main() {
    int a[] = {1,2,3,4,5};
    forEach(a, 5, printDouble); <span class="cm">// 2 4 6 8 10</span>
}</pre><div class="trace">ì½œë°±: í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ì „ë‹¬<br>forEachê°€ ê° ì›ì†Œì— fn ì ìš©<br>í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ìŠ¤íƒ€ì¼!</div>`},

            {
                n: 9, t: "ë¬¸ìì—´ ë™ì  ë³µì‚¬ (strdup)", d: 2,
                q: `ë¬¸ìì—´ì„ ë™ì  í• ë‹¹ìœ¼ë¡œ ë³µì‚¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
<pre class="code-c">char* myStrdup(const char *s) {
    <span class="cm">// malloc + strcpy</span>
}</pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">char* myStrdup(const char *s) {
    int len = strlen(s);
    char *copy = (char*)malloc(len + 1);
    if (copy) strcpy(copy, s);
    return copy;
}
<span class="cm">// ì‚¬ìš©:</span>
char *s = myStrdup("Hello");
printf("%s", s);
free(s); <span class="cm">// ë°˜ë“œì‹œ í•´ì œ!</span></pre><div class="trace">strlen+1: '\\0' í¬í•¨!<br>í˜¸ì¶œìê°€ free ì±…ì„</div>`},

            {
                n: 10, t: "êµ¬ì¡°ì²´ ë™ì  ë°°ì—´", d: 2,
                q: `í•™ìƒ êµ¬ì¡°ì²´ ë°°ì—´ì„ ë™ì ìœ¼ë¡œ í• ë‹¹í•˜ì„¸ìš”.
<pre class="code-c">typedef struct { char name[20]; int score; } Student;
<span class="cm">// nëª…ì˜ í•™ìƒ ë°°ì—´ í• ë‹¹, ì…ë ¥, ì¶œë ¥, í•´ì œ</span></pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">int n = 3;
Student *students = (Student*)malloc(n*sizeof(Student));
for (int i=0;i<n;i++) {
    sprintf(students[i].name, "í•™ìƒ%d", i+1);
    students[i].score = 80 + i*5;
}
for (int i=0;i<n;i++)
    printf("%s: %d\\n", students[i].name, students[i].score);
free(students);</pre>`},

            {
                n: 11, t: "[ì¶œë ¥ì˜ˆì¸¡] í¬ì¸í„° ì‚°ìˆ ", d: 3,
                q: `ì•„ë˜ ì½”ë“œì˜ ì¶œë ¥ì„ ì“°ì„¸ìš”.
<pre class="code-c">int a[] = {10,20,30,40,50};
int *p = a;
int *q = a + 3;
printf("%d\\n", *p);
printf("%d\\n", *(p+2));
printf("%d\\n", q - p);
printf("%d\\n", p[4]);
printf("%ld\\n", (long)q - (long)p);</pre>`,
                a: `<span class="key">ì •ë‹µ</span><div class="output-box">10<br>30<br>3<br>50<br>12</div><div class="trace">*p = a[0] = 10<br>*(p+2) = a[2] = 30<br>q-p = 3 (í¬ì¸í„° ì°¨ì´ = ì›ì†Œ ìˆ˜!)<br>p[4] = *(p+4) = a[4] = 50<br>(long)q-(long)p = 3*sizeof(int) = 12ë°”ì´íŠ¸</div>`
            },

            {
                n: 12, t: "const í¬ì¸í„° ì´í•´", d: 2,
                q: `ë‹¤ìŒ ì„ ì–¸ì˜ ì°¨ì´ë¥¼ ì„¤ëª…í•˜ì„¸ìš”.
<pre class="code-c">const int *p1;      <span class="cm">// (A)</span>
int * const p2;     <span class="cm">// (B)</span>
const int * const p3; <span class="cm">// (C)</span></pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">(A) const int *p1;
    <span class="cm">â†’ ê°’ ë³€ê²½ ë¶ˆê°€, ì£¼ì†Œ ë³€ê²½ ê°€ëŠ¥</span>
    <span class="cm">â†’ *p1 = 10; âŒ  p1 = &b; âœ…</span>

(B) int * const p2;
    <span class="cm">â†’ ê°’ ë³€ê²½ ê°€ëŠ¥, ì£¼ì†Œ ë³€ê²½ ë¶ˆê°€</span>
    <span class="cm">â†’ *p2 = 10; âœ…  p2 = &b; âŒ</span>

(C) const int * const p3;
    <span class="cm">â†’ ë‘˜ ë‹¤ ë¶ˆê°€</span>
    <span class="cm">â†’ *p3 = 10; âŒ  p3 = &b; âŒ</span></pre><div class="trace"><span class="val">íŒ</span>: constê°€ * ì™¼ìª½ â†’ ê°’ ë³´í˜¸<br>constê°€ * ì˜¤ë¥¸ìª½ â†’ í¬ì¸í„° ë³´í˜¸</div>`},

            {
                n: 13, t: "ë¹„íŠ¸í•„ë“œ êµ¬ì¡°ì²´", d: 2,
                q: `ë¹„íŠ¸í•„ë“œë¥¼ ì‚¬ìš©í•œ êµ¬ì¡°ì²´ë¥¼ ì‘ì„±í•˜ì„¸ìš”.
<pre class="code-c"><span class="cm">// ìƒ‰ìƒ: R(5bit), G(6bit), B(5bit) = 16bit</span>
typedef struct {
    <span class="cm">// ë¹„íŠ¸í•„ë“œ ì‚¬ìš©</span>
} RGB565;</pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">typedef struct {
    unsigned short r : 5;
    unsigned short g : 6;
    unsigned short b : 5;
} RGB565;
<span class="cm">// ì‚¬ìš©:</span>
RGB565 color;
color.r = 31; <span class="cm">// ìµœëŒ€ 2^5-1 = 31</span>
color.g = 63; <span class="cm">// ìµœëŒ€ 2^6-1 = 63</span>
color.b = 31;
printf("size: %lu\\n", sizeof(RGB565)); <span class="cm">// 2ë°”ì´íŠ¸!</span></pre>`},

            {
                n: 14, t: "errnoì™€ ì—ëŸ¬ ì²˜ë¦¬", d: 2,
                q: `íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.
<pre class="code-c">#include &lt;errno.h&gt;
<span class="cm">// íŒŒì¼ ì—´ê¸° + ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´</span></pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;
int main() {
    FILE *f = fopen("ì—†ëŠ”íŒŒì¼.txt", "r");
    if (f == NULL) {
        printf("ì—ëŸ¬ ì½”ë“œ: %d\\n", errno);
        printf("ë©”ì‹œì§€: %s\\n", strerror(errno));
        perror("fopen ì‹¤íŒ¨"); <span class="cm">// ìë™ ë©”ì‹œì§€</span>
        return 1;
    }
    fclose(f);
    return 0;
}</pre><div class="trace">errno: ì „ì—­ ì—ëŸ¬ ë²ˆí˜¸<br>strerror: ë²ˆí˜¸â†’ë©”ì‹œì§€<br>perror: ì ‘ë‘ì‚¬+ë©”ì‹œì§€ ìë™ ì¶œë ¥</div>`},

            {
                n: 15, t: "ğŸ† ì œë„¤ë¦­ ë™ì  ë°°ì—´ (Vector)", d: 4,
                q: `ìë™ìœ¼ë¡œ í¬ê¸°ê°€ ëŠ˜ì–´ë‚˜ëŠ” ë™ì  ë°°ì—´ì„ êµ¬í˜„í•˜ì„¸ìš”.
<pre class="code-c">typedef struct {
    int *data; int size; int capacity;
} Vector;
void vecInit(Vector *v) { <span class="cm">/* ? */</span> }
void vecPush(Vector *v, int val) { <span class="cm">/* ? */</span> }
int vecGet(Vector *v, int i) { <span class="cm">/* ? */</span> }
void vecFree(Vector *v) { <span class="cm">/* ? */</span> }</pre>`,
                a: `<span class="key">ì •ë‹µ</span><pre class="code-c">void vecInit(Vector *v) {
    v->capacity = 4;
    v->size = 0;
    v->data = (int*)malloc(4 * sizeof(int));
}
void vecPush(Vector *v, int val) {
    if (v->size == v->capacity) {
        v->capacity *= 2; <span class="cm">// 2ë°° í™•ì¥!</span>
        v->data = (int*)realloc(v->data,
                    v->capacity * sizeof(int));
    }
    v->data[v->size++] = val;
}
int vecGet(Vector *v, int i) { return v->data[i]; }
void vecFree(Vector *v) { free(v->data); v->data=NULL; }</pre><div class="trace">C++ì˜ std::vectorì™€ ë™ì¼ ì›ë¦¬!<br>ê°€ë“ ì°¨ë©´ 2ë°° í™•ì¥ (amortized O(1))<br>ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì“°ëŠ” íŒ¨í„´</div>`}
        ];
        const c = document.getElementById('problems'); P.forEach(p => { const dc = p.d <= 1 ? 'ez' : p.d <= 2 ? 'md' : 'hd'; const dots = Array.from({ length: 5 }, (_, i) => `<span${i < p.d ? ' class="on"' : ''}>â€‹</span>`).join(''); c.innerHTML += `<div class="prob"><div class="prob-top"><div class="prob-num ${dc}">${p.n}</div><div class="prob-title">${p.t}</div><div class="diff-dots">${dots}</div></div><div class="prob-body"><div class="q">${p.q}</div><textarea class="write" placeholder="âœï¸ ë‹µì„ ì‘ì„±í•˜ì„¸ìš”" rows="8"></textarea><details class="ans"><summary>ì •ë‹µ ë° í•´ì„¤ ë³´ê¸°</summary><div class="ans-body">${p.a}</div></details></div></div>`; });
    </script>
    <script src="../submit.js"></script>
    <script src="../../platform.js"></script>
</body>

</html>