*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0
}

:root {
    --f:'Pretendard Variable','Pretendard',system-ui,-apple-system,'Noto Sans KR',sans-serif;
    --fm: 'JetBrains Mono', monospace;
    --r: 12px;
    --rs: 8px;
    --ease: cubic-bezier(.22, 1, .36, 1);
    --t: .25s var(--ease);
    --max: 860px;
}

/* === LIGHT THEME (default) === */
[data-theme="light"] {
    --bg: #f7f8fa;
    --bg2: #ffffff;
    --bg3: #f0f1f5;
    --bg4: #e4e5ec;
    --tx: #1b1b2f;
    --tx2: #52526e;
    --tx3: #8e8ea8;
    --bd: #e6e7ed;
    --bdh: #d0d1da;
    --ac: #4f46e5;
    --ac2: #6366f1;
    --acs: rgba(79, 70, 229, .07);
    --acg: linear-gradient(135deg, #4f46e5, #7c3aed);
    --gn: #059669;
    --gns: rgba(5, 150, 105, .07);
    --gnb: #d1fae5;
    --gnx: #065f46;
    --am: #d97706;
    --ams: rgba(217, 119, 6, .07);
    --amb: #fef3c7;
    --amx: #92400e;
    --rd: #dc2626;
    --rds: rgba(220, 38, 38, .06);
    --card: #ffffff;
    --card-bd: #e6e7ed;
    --card-sh: 0 1px 3px rgba(0, 0, 0, .04), 0 4px 14px rgba(0, 0, 0, .03);
    --card-sh-h: 0 8px 30px rgba(0, 0, 0, .08);
    --nav-bg: rgba(255, 255, 255, .85);
    --overlay: rgba(0, 0, 0, .25);
}

/* === DARK THEME === */
[data-theme="dark"] {
    --bg: #0f0f14;
    --bg2: #18181f;
    --bg3: #222230;
    --bg4: #2e2e3d;
    --tx: #ededf2;
    --tx2: #9898ad;
    --tx3: #606075;
    --bd: #2a2a38;
    --bdh: #3a3a4a;
    --ac: #818cf8;
    --ac2: #a5b4fc;
    --acs: rgba(129, 140, 248, .1);
    --acg: linear-gradient(135deg, #6366f1, #a855f7);
    --gn: #34d399;
    --gns: rgba(52, 211, 153, .1);
    --gnb: rgba(52, 211, 153, .15);
    --gnx: #6ee7b7;
    --am: #fbbf24;
    --ams: rgba(251, 191, 36, .1);
    --amb: rgba(251, 191, 36, .12);
    --amx: #fcd34d;
    --rd: #f87171;
    --rds: rgba(248, 113, 113, .08);
    --card: #18181f;
    --card-bd: #2a2a38;
    --card-sh: 0 1px 3px rgba(0, 0, 0, .12), 0 4px 14px rgba(0, 0, 0, .1);
    --card-sh-h: 0 8px 30px rgba(0, 0, 0, .25);
    --nav-bg: rgba(15, 15, 20, .85);
    --overlay: rgba(0, 0, 0, .55);
}

html {
    scroll-behavior: smooth
}

body {
    font-family: var(--f);
    background: var(--bg);
    color: var(--tx);
    line-height: 1.65;
    min-height: 100vh;
    transition: background .4s, color .3s;
    -webkit-font-smoothing: antialiased
}

::-webkit-scrollbar {
    width: 5px
}

::-webkit-scrollbar-track {
    background: transparent
}

::-webkit-scrollbar-thumb {
    background: var(--bg4);
    border-radius: 3px
}

/* === NAV === */
.nav {
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
    height: 60px;
    background: var(--nav-bg);
    backdrop-filter: blur(20px) saturate(1.4);
    border-bottom: 1px solid var(--bd);
    transition: background .3s
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    color: var(--tx)
}

.nav-logo {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: var(--acg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 1rem;
    color: #fff;
    letter-spacing: -.03em;
    flex-shrink: 0
}

.nav-title {
    font-weight: 800;
    font-size: .88rem;
    letter-spacing: -.02em;
    line-height: 1.2
}

.nav-sub {
    font-weight: 400;
    font-size: .62rem;
    color: var(--tx3);
    letter-spacing: .02em
}

.nav-right {
    display: flex;
    align-items: center;
    gap: 6px
}

.search-box {
    position: relative;
    display: flex;
    align-items: center
}

.search-icon {
    position: absolute;
    left: 10px;
    width: 16px;
    height: 16px;
    color: var(--tx3);
    display: flex;
    pointer-events: none
}

.search-icon svg {
    width: 100%;
    height: 100%
}

.search-input {
    width: 180px;
    height: 36px;
    padding: 0 12px 0 34px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: var(--bg);
    color: var(--tx);
    font-size: .78rem;
    outline: none;
    transition: all var(--t);
    font-family: var(--f)
}

.search-input::placeholder {
    color: var(--tx3)
}

.search-input:focus {
    border-color: var(--ac);
    box-shadow: 0 0 0 3px var(--acs);
    width: 240px
}

.icon-btn {
    width: 36px;
    height: 36px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: var(--bg2);
    cursor: pointer;
    color: var(--tx3);
    transition: all var(--t);
    display: flex;
    align-items: center;
    justify-content: center
}

.icon-btn svg {
    width: 16px;
    height: 16px
}

.icon-btn:hover {
    border-color: var(--ac);
    color: var(--ac)
}

.icon-btn.on {
    background: var(--amb);
    color: var(--amx);
    border-color: var(--am)
}

/* === MAIN === */
.main {
    max-width: var(--max);
    margin: 0 auto;
    padding: 0 24px
}

/* === HERO === */
.hero {
    padding: 48px 0 32px
}

.hero-label {
    font-size: .65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: .1em;
    color: var(--ac);
    margin-bottom: 8px
}

.hero-title {
    font-size: 1.9rem;
    font-weight: 900;
    letter-spacing: -.04em;
    line-height: 1.2;
    color: var(--tx)
}

.hero-title strong {
    background: var(--acg);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text
}

.hero-desc {
    font-size: .84rem;
    color: var(--tx2);
    margin-top: 8px;
    line-height: 1.6
}

.hero-desc strong {
    color: var(--tx);
    font-weight: 600
}

.progress-wrap {
    margin-top: 24px;
    padding: 16px 20px;
    border-radius: var(--r);
    background: var(--card);
    border: 1px solid var(--card-bd);
    box-shadow: var(--card-sh)
}

.progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px
}

.progress-text {
    font-size: .75rem;
    color: var(--tx2)
}

.progress-text strong {
    color: var(--gn);
    font-weight: 700;
    font-size: .9rem
}

.progress-pct {
    font-size: .7rem;
    color: var(--tx3);
    font-weight: 600
}

.progress-track {
    height: 6px;
    background: var(--bg3);
    border-radius: 3px;
    overflow: hidden
}

.progress-fill {
    height: 100%;
    border-radius: 3px;
    background: var(--acg);
    transition: width .6s var(--ease);
    width: 0
}

/* === GRID === */
.grid-section {
    padding-bottom: 32px
}

.grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 14px
}

.card {
    background: var(--card);
    border: 1px solid var(--card-bd);
    border-radius: var(--r);
    padding: 22px;
    cursor: pointer;
    transition: all .3s var(--ease);
    position: relative;
    box-shadow: var(--card-sh);
    overflow: hidden
}

.card:hover {
    transform: translateY(-4px);
    box-shadow: var(--card-sh-h);
    border-color: var(--bdh)
}

/* Accent top bar */
.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--c-accent);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform .35s var(--ease)
}

.card:hover::before {
    transform: scaleX(1)
}

.card.done {
    border-left: 3px solid var(--gn)
}

.card.done .card-done-badge {
    display: flex
}

.card-top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 14px
}

.card-svg {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: transform var(--t)
}

.card-svg svg {
    width: 20px;
    height: 20px
}

.card:hover .card-svg {
    transform: scale(1.08)
}

.card-actions {
    display: flex;
    gap: 3px
}

.card-action {
    width: 28px;
    height: 28px;
    border-radius: 7px;
    border: 1px solid var(--bd);
    background: none;
    cursor: pointer;
    color: var(--tx3);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--t)
}

.card-action svg {
    width: 14px;
    height: 14px
}

.card-action.bm-on {
    color: var(--am);
    border-color: var(--am);
    background: var(--amb)
}

.card-action.ck-on {
    color: var(--gn);
    border-color: var(--gn);
    background: var(--gnb)
}

.card-action:hover {
    transform: scale(1.1)
}

.card-name {
    font-size: 1.05rem;
    font-weight: 800;
    letter-spacing: -.02em;
    margin-bottom: 2px
}

.card-hanja {
    font-size: .62rem;
    color: var(--tx3);
    font-weight: 400;
    margin-left: 4px;
    letter-spacing: .02em
}

.card-short {
    font-size: .76rem;
    color: var(--tx2);
    line-height: 1.55;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden
}

.card-done-badge {
    display: none;
    align-items: center;
    gap: 4px;
    margin-top: 10px;
    font-size: .6rem;
    color: var(--gnx);
    font-weight: 600;
    letter-spacing: .02em
}

.card-done-badge svg {
    width: 13px;
    height: 13px
}

.card-bottom {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 14px;
    padding-top: 12px;
    border-top: 1px solid var(--bd)
}

.card-tag {
    font-size: .58rem;
    color: var(--tx3);
    background: var(--bg3);
    padding: 3px 10px;
    border-radius: 6px;
    font-weight: 500
}

.card-cta {
    display: flex;
    align-items: center;
    gap: 3px;
    font-size: .65rem;
    color: var(--ac);
    font-weight: 600;
    transition: gap var(--t)
}

.card-cta svg {
    width: 14px;
    height: 14px;
    transition: transform var(--t)
}

.card:hover .card-cta {
    gap: 6px
}

.card:hover .card-cta svg {
    transform: translateX(2px)
}

/* Empty */
.empty {
    text-align: center;
    padding: 60px 20px
}

.empty-inner {
    color: var(--tx3)
}

.empty-svg {
    display: block;
    margin: 0 auto 8px;
    width: 40px;
    height: 40px;
    color: var(--tx3)
}

.empty-svg svg {
    width: 100%;
    height: 100%
}

/* === DETAIL PANEL === */
.overlay {
    position: fixed;
    inset: 0;
    z-index: 300;
    background: var(--overlay);
    backdrop-filter: blur(8px);
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px
}

.overlay.on {
    display: flex
}

.detail-panel {
    width: 100%;
    max-width: 620px;
    max-height: 88vh;
    background: var(--bg2);
    border: 1px solid var(--bd);
    border-radius: 16px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    animation: dpIn .3s var(--ease);
    box-shadow: 0 24px 64px rgba(0, 0, 0, .15)
}

@keyframes dpIn {
    from {
        opacity: 0;
        transform: scale(.95) translateY(10px)
    }

    to {
        opacity: 1;
        transform: none
    }
}

.dp-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 24px 24px 16px;
    position: relative
}

.dp-icon {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0
}

.dp-icon svg {
    width: 22px;
    height: 22px;
    color: #fff
}

.dp-meta {
    flex: 1;
    min-width: 0
}

.dp-hanja {
    font-size: .58rem;
    color: var(--tx3);
    font-weight: 500;
    letter-spacing: .08em
}

.dp-name {
    font-size: 1.4rem;
    font-weight: 900;
    letter-spacing: -.04em;
    line-height: 1.2
}

.dp-short {
    font-size: .78rem;
    color: var(--tx2);
    margin-top: 4px;
    line-height: 1.5
}

.dp-close {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: 1px solid var(--bd);
    background: var(--bg);
    cursor: pointer;
    color: var(--tx3);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--t)
}

.dp-close svg {
    width: 16px;
    height: 16px
}

.dp-close:hover {
    color: var(--rd);
    border-color: var(--rd);
    background: var(--rds)
}

.dp-body {
    flex: 1;
    overflow-y: auto;
    padding: 0 24px 24px
}

/* Section headers */
.sec {
    margin-top: 24px
}

.sec:first-child {
    margin-top: 4px
}

.sec-head {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px
}

.sec-icon {
    width: 20px;
    height: 20px;
    color: var(--ac);
    display: flex;
    flex-shrink: 0
}

.sec-icon svg {
    width: 100%;
    height: 100%
}

.sec-label {
    font-size: .72rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .06em;
    color: var(--tx)
}

/* Definition */
.def-text {
    font-size: .8rem;
    color: var(--tx2);
    line-height: 1.8
}

/* Key Points */
.kp-list {
    display: flex;
    flex-direction: column;
    gap: 8px
}

.kp-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px 16px;
    border-radius: var(--rs);
    background: var(--bg);
    border: 1px solid var(--bd);
    transition: all var(--t)
}

.kp-item:hover {
    border-color: var(--ac);
    background: var(--acs)
}

.kp-num {
    min-width: 24px;
    height: 24px;
    border-radius: 7px;
    background: var(--acg);
    color: #fff;
    font-size: .62rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0
}

.kp-content {
    flex: 1
}

.kp-label {
    font-size: .76rem;
    font-weight: 700;
    color: var(--tx);
    margin-bottom: 1px
}

.kp-desc {
    font-size: .72rem;
    color: var(--tx2);
    line-height: 1.5
}

/* Comparison Table */
.cmp-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border: 1px solid var(--bd);
    border-radius: var(--rs);
    overflow: hidden;
    font-size: .72rem
}

.cmp-table thead {
    background: var(--bg3)
}

.cmp-table th {
    padding: 10px 14px;
    text-align: left;
    font-weight: 700;
    color: var(--tx);
    font-size: .68rem;
    text-transform: uppercase;
    letter-spacing: .04em;
    border-bottom: 1px solid var(--bd)
}

.cmp-table td {
    padding: 10px 14px;
    color: var(--tx2);
    border-bottom: 1px solid var(--bd);
    line-height: 1.5
}

.cmp-table tr:last-child td {
    border-bottom: none
}

.cmp-table tbody tr {
    transition: background var(--t)
}

.cmp-table tbody tr:hover {
    background: var(--acs)
}

/* Quiz / Exam */
.quiz-card {
    border: 1px solid var(--bd);
    border-radius: var(--rs);
    overflow: hidden;
    margin-bottom: 12px
}

.quiz-q {
    padding: 14px 16px;
    font-size: .78rem;
    font-weight: 600;
    color: var(--tx);
    background: var(--bg);
    border-bottom: 1px solid var(--bd);
    line-height: 1.5
}

.quiz-choices {
    padding: 8px
}

.quiz-choice {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 6px;
    font-size: .74rem;
    color: var(--tx2);
    cursor: pointer;
    transition: all var(--t);
    line-height: 1.5;
    border: 1px solid transparent
}

.quiz-choice:hover {
    background: var(--acs);
    color: var(--tx)
}

.quiz-num {
    min-width: 22px;
    height: 22px;
    border-radius: 6px;
    background: var(--bg3);
    color: var(--tx3);
    font-size: .6rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all var(--t)
}

.quiz-choice:hover .quiz-num {
    background: var(--ac);
    color: #fff
}

/* Quiz answered states */
.quiz-choice.correct {
    background: var(--gnb);
    color: var(--gnx);
    border-color: var(--gn)
}

.quiz-choice.correct .quiz-num {
    background: var(--gn);
    color: #fff
}

.quiz-choice.wrong {
    background: var(--rds);
    color: var(--rd);
    border-color: var(--rd)
}

.quiz-choice.wrong .quiz-num {
    background: var(--rd);
    color: #fff
}

.quiz-choice.disabled {
    pointer-events: none;
    opacity: .5
}

.quiz-choice.correct.disabled,
.quiz-choice.wrong.disabled {
    opacity: 1
}

.quiz-explanation {
    padding: 12px 16px;
    background: var(--gnb);
    border-top: 1px solid var(--gn);
    font-size: .72rem;
    color: var(--gnx);
    line-height: 1.6;
    display: none
}

.quiz-explanation.show {
    display: block
}

/* Tip Box */
.tip-box {
    display: flex;
    gap: 12px;
    padding: 16px;
    border-radius: var(--rs);
    background: var(--amb);
    border: 1px solid var(--am);
    font-size: .76rem;
    color: var(--amx);
    line-height: 1.7
}

.tip-box-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    display: flex
}

.tip-box-icon svg {
    width: 100%;
    height: 100%
}

/* Related Tags */
.rel-list {
    display: flex;
    gap: 6px;
    flex-wrap: wrap
}

.rel-chip {
    padding: 6px 14px;
    border-radius: 20px;
    border: 1px solid var(--bd);
    background: var(--bg);
    font-size: .68rem;
    color: var(--tx2);
    cursor: pointer;
    transition: all var(--t);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 5px
}

.rel-chip svg {
    width: 13px;
    height: 13px
}

.rel-chip:hover {
    border-color: var(--ac);
    color: var(--ac);
    background: var(--acs);
    transform: translateY(-2px)
}

/* Footer Bar */
.dp-footer {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    border-top: 1px solid var(--bd);
    background: var(--bg)
}

.dp-btn {
    padding: 8px 16px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: none;
    color: var(--tx2);
    font-size: .72rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--t);
    display: flex;
    align-items: center;
    gap: 5px;
    font-family: var(--f)
}

.dp-btn:hover {
    transform: translateY(-1px)
}

.dp-btn-icon {
    width: 15px;
    height: 15px;
    display: flex
}

.dp-btn-icon svg {
    width: 100%;
    height: 100%
}

.dp-btn-learn:hover {
    border-color: var(--gn);
    color: var(--gn)
}

.dp-btn-learn.on {
    background: var(--gnb);
    color: var(--gnx);
    border-color: var(--gn)
}

.dp-btn-bm:hover {
    border-color: var(--am);
    color: var(--am)
}

.dp-btn-bm.on {
    background: var(--amb);
    color: var(--amx);
    border-color: var(--am)
}

.dp-nav {
    margin-left: auto;
    display: flex;
    gap: 4px
}

.dp-nav-btn {
    width: 32px;
    height: 32px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: none;
    color: var(--tx3);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--t)
}

.dp-nav-btn svg {
    width: 16px;
    height: 16px
}

.dp-nav-btn:hover {
    border-color: var(--ac);
    color: var(--ac)
}

/* Toasts */
.toasts {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 500;
    display: flex;
    flex-direction: column;
    gap: 6px
}

.toast {
    padding: 10px 18px;
    border-radius: var(--rs);
    background: var(--card);
    border: 1px solid var(--bd);
    font-size: .74rem;
    color: var(--tx);
    animation: toastIn .25s var(--ease);
    box-shadow: var(--card-sh);
    font-weight: 500
}

.toast.t-gn {
    border-color: var(--gn);
    color: var(--gn)
}

.toast.t-am {
    border-color: var(--am);
    color: var(--am)
}

@keyframes toastIn {
    from {
        opacity: 0;
        transform: translateY(8px)
    }

    to {
        opacity: 1;
        transform: none
    }
}

/* Footer */
.footer {
    text-align: center;
    padding: 40px 16px;
    border-top: 1px solid var(--bd);
    color: var(--tx3);
    font-size: .6rem;
    margin-top: 16px
}

.footer strong {
    color: var(--tx2);
    font-weight: 600
}

/* Responsive */
@media(max-width:640px) {
    .hero-title {
        font-size: 1.4rem
    }

    .grid {
        grid-template-columns: 1fr
    }

    .search-input {
        width: 130px
    }

    .search-input:focus {
        width: 170px
    }

    .nav {
        padding: 0 14px;
        height: 52px
    }

    .main {
        padding: 0 14px
    }

    .hero {
        padding: 32px 0 24px
    }

    .detail-panel {
        max-height: 92vh;
        border-radius: 12px
    }

    .dp-header {
        padding: 18px 18px 12px
    }

    .dp-body {
        padding: 0 18px 18px
    }

    .dp-footer {
        padding: 10px 18px
    }
}