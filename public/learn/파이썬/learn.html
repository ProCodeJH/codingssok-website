<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python í•™ìŠµ â€” íŒŒì´ì¬ ì½”ë”© ë„ì¥</title>
    <link rel="stylesheet" href="../Cì–¸ì–´/common.css">
    <style>
        /* Choice rows for quiz */
        .choice-row {
            padding: 10px 14px;
            margin: 4px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all .15s;
            display: flex;
            align-items: center;
            gap: 8px;
            border-left: 3px solid transparent;
            font-size: .9rem;
        }

        .choice-row:hover {
            background: rgba(99, 102, 241, .06);
        }

        .choice-label {
            font-weight: 700;
            color: var(--accent, #6366f1);
            min-width: 20px;
        }

        .table-wrap {
            overflow-x: auto;
            margin: 1rem 0;
        }

        .table-wrap table {
            width: 100%;
            border-collapse: collapse;
            font-size: .85rem;
        }

        .table-wrap th,
        .table-wrap td {
            padding: 8px 12px;
            border: 1px solid var(--border);
            text-align: left;
        }

        .table-wrap th {
            background: var(--card);
            font-weight: 600;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <div class="hdr" id="hdr">
            <h1 id="unit-title">Python í•™ìŠµ</h1>
            <div class="sub" id="unit-sub"></div>
            <span class="unit-badge" id="unit-badge"></span>
            <div class="level-bar"><span class="on"></span><span></span><span></span></div>
            <div class="meta">
                <span class="tag pri">ğŸ Python</span>
                <span class="tag acc" id="unit-qcount">ğŸ“ ë¬¸ì œ</span>
                <span class="tag">â± 10~20ë¶„</span>
            </div>
        </div>
        <div class="stu-bar">
            <label>ğŸ‘¤ ì´ë¦„ <input type="text" id="stu-name" placeholder="ì´ë¦„"></label>
            <label>ğŸ“… ë‚ ì§œ <input type="date" id="stu-date"></label>
        </div>
        <div class="learn" id="learn-section"></div>
        <div id="problems"></div>
        <div class="submit-section">
            <p>ëª¨ë“  ë¬¸ì œë¥¼ í’€ì—ˆë‚˜ìš”? ğŸ“¨</p>
            <button class="btn-submit" id="btn-submit">ğŸ“„ ì œì¶œí•˜ê¸°</button>
        </div>
        <div class="modal-overlay" id="submit-modal">
            <div class="modal-box">
                <div class="modal-icon">âœ…</div>
                <h3>ì œì¶œ ì™„ë£Œ!</h3>
                <p>í•™ìŠµì§€ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <div style="margin:12px 0"><span class="info-tag" id="modal-name"></span> <span class="info-tag"
                        id="modal-date"></span> <span class="info-tag" id="modal-count"></span></div>
                <p style="font-size:.78rem;color:var(--dim)">ğŸ“ <strong id="modal-filename"></strong></p>
                <button class="btn-close-modal" id="btn-close-modal">í™•ì¸</button>
            </div>
        </div>
        <!-- Navigation -->
        <div class="pg" id="nav-bar"></div>
        <!-- Unit selector (ì¹´ë“œ ê·¸ë¦¬ë“œ) -->
        <div id="unit-grid" style="display:none">
            <h2 style="text-align:center;margin:2rem 0 1rem;font-size:1.3rem">ğŸ“š ìœ ë‹› ì„ íƒ</h2>
            <div id="grid-container"
                style="display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;padding:0 1rem 2rem">
            </div>
        </div>
        <div class="ft">ğŸ Python ì½”ë”© ë„ì¥ Â· <a href="index.html" style="color:inherit;text-decoration:underline">ëª©ì°¨ë¡œ
                ëŒì•„ê°€ê¸°</a></div>
    </div>

    <script src="data.js"></script>
    <script>
        // â”€â”€ Parse URL hash to get unit id â”€â”€
        const params = new URLSearchParams(location.search);
        const unitId = params.get('id') || location.hash.replace('#', '');

        // â”€â”€ Chapter mapping â”€â”€
        const CH_MAP = {
            intro: { ch: '01', name: 'ì…ë¬¸' },
            basic: { ch: '02', name: 'ê¸°ì´ˆ ì—°ì‚°' },
            logic: { ch: '03', name: 'ë…¼ë¦¬Â·ë¬¸ìì—´' },
            condition: { ch: '04', name: 'ì¡°ê±´ë¬¸' },
            loop: { ch: '05', name: 'ë°˜ë³µë¬¸' },
            datatype: { ch: '06', name: 'ìë£Œêµ¬ì¡° ì‘ìš©' },
            function: { ch: '07', name: 'í•¨ìˆ˜' },
            oop: { ch: '08', name: 'ê°ì²´ì§€í–¥' },
            advanced: { ch: '09', name: 'ê³ ê¸‰Â·ì‹¤ì „' },
        };

        function findUnit(id) {
            return TERMS.find(t => t.id === id);
        }

        function renderUnit(unit) {
            if (!unit) { showGrid(); return; }

            const ch = CH_MAP[unit.category] || { ch: '??', name: unit.category };
            const idx = TERMS.indexOf(unit);

            // Header
            document.getElementById('unit-title').textContent = unit.name;
            document.getElementById('unit-sub').textContent = unit.short;
            document.getElementById('unit-badge').textContent = `Chapter ${ch.ch} Â· ${ch.name}`;
            document.title = `${unit.name} â€” Python ì½”ë”© ë„ì¥`;

            // Count questions
            let qCount = 0;
            unit.sections.forEach(s => { if (s.type === 'exam') qCount += s.questions.length; });
            document.getElementById('unit-qcount').textContent = `ğŸ“ ${qCount}ë¬¸ì œ`;

            // Learn section
            const learn = document.getElementById('learn-section');
            let learnHtml = '';
            unit.sections.forEach(sec => {
                if (sec.type === 'definition') {
                    learnHtml += `<h2><span class="ico" style="background:rgba(99,102,241,.15)">ğŸ</span> ${sec.title}</h2>`;
                    learnHtml += `<p>${sec.content}</p>`;
                } else if (sec.type === 'keypoints') {
                    learnHtml += `<h3>ğŸ“Œ ${sec.title}</h3><ul>`;
                    sec.items.forEach(it => {
                        learnHtml += `<li><strong>${it.label}</strong> â€” ${it.desc}</li>`;
                    });
                    learnHtml += `</ul>`;
                } else if (sec.type === 'compare') {
                    learnHtml += `<h3>ğŸ“Š ${sec.title}</h3>`;
                    learnHtml += `<div class="table-wrap"><table><thead><tr>`;
                    sec.headers.forEach(h => learnHtml += `<th>${h}</th>`);
                    learnHtml += `</tr></thead><tbody>`;
                    sec.rows.forEach(r => {
                        learnHtml += `<tr>`;
                        r.forEach(c => learnHtml += `<td>${c}</td>`);
                        learnHtml += `</tr>`;
                    });
                    learnHtml += `</tbody></table></div>`;
                } else if (sec.type === 'tip') {
                    learnHtml += `<div class="tip">ğŸ’¡ ${sec.content}</div>`;
                }
            });
            learn.innerHTML = learnHtml;

            // Problems (exam sections)
            const probDiv = document.getElementById('problems');
            let probHtml = '';
            let probNum = 0;
            unit.sections.forEach(sec => {
                if (sec.type !== 'exam') return;
                sec.questions.forEach(q => {
                    probNum++;
                    const choices = q.choices.map((ch, ci) => {
                        const label = ['â‘ ', 'â‘¡', 'â‘¢', 'â‘£'][ci] || `${ci + 1}`;
                        return `<div class="choice-row" data-idx="${ci}" onclick="selectChoice(this, ${q.answer})">
                            <span class="choice-label">${label}</span> ${ch}
                        </div>`;
                    }).join('');
                    probHtml += `<div class="prob">
                        <div class="prob-top">
                            <div class="prob-num ez">${probNum}</div>
                            <div class="prob-title">${q.q.replace(/\n/g, '<br>')}</div>
                        </div>
                        <div class="prob-body">
                            <div class="q">${choices}</div>
                            <details class="ans">
                                <summary>ì •ë‹µ ë° í•´ì„¤ ë³´ê¸°</summary>
                                <div class="ans-body">
                                    <span class="key">ì •ë‹µ</span> ${['â‘ ', 'â‘¡', 'â‘¢', 'â‘£'][q.answer]}
                                    <div class="explain">ğŸ’¡ ${q.explanation}</div>
                                </div>
                            </details>
                        </div>
                    </div>`;
                });
            });
            probDiv.innerHTML = probHtml;

            // Navigation
            const nav = document.getElementById('nav-bar');
            const prev = idx > 0 ? TERMS[idx - 1] : null;
            const next = idx < TERMS.length - 1 ? TERMS[idx + 1] : null;
            let navHtml = '';
            if (prev) navHtml += `<a href="learn.html?id=${prev.id}">â† ${prev.name}</a>`;
            navHtml += `<span class="tag active">${unit.name.split('.')[0]}.</span>`;
            if (next) navHtml += `<a href="learn.html?id=${next.id}">${next.name} â†’</a>`;
            nav.innerHTML = navHtml;
        }

        function showGrid() {
            document.getElementById('hdr').style.display = 'none';
            document.querySelector('.stu-bar').style.display = 'none';
            document.getElementById('learn-section').style.display = 'none';
            document.getElementById('problems').style.display = 'none';
            document.querySelector('.submit-section').style.display = 'none';
            document.getElementById('nav-bar').style.display = 'none';
            document.getElementById('unit-grid').style.display = 'block';

            const grid = document.getElementById('grid-container');
            let html = '';
            const catColors = {
                intro: '#10b981', basic: '#3b82f6', logic: '#8b5cf6',
                condition: '#f59e0b', loop: '#06b6d4', datatype: '#ec4899',
                function: '#f97316', oop: '#dc2626',
                advanced: '#8b5cf6'
            };

            TERMS.forEach(t => {
                const ch = CH_MAP[t.category] || { ch: '?', name: t.category };
                const color = catColors[t.category] || '#6b7280';
                html += `<a href="learn.html?id=${t.id}" style="text-decoration:none;color:inherit;
                    background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;
                    display:block;transition:all .2s;box-shadow:0 2px 8px rgba(0,0,0,.06)"
                    onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 16px rgba(0,0,0,.12)'"
                    onmouseout="this.style.transform='';this.style.boxShadow='0 2px 8px rgba(0,0,0,.06)'">
                    <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                        <span style="background:${color}20;color:${color};font-size:.7rem;padding:3px 8px;border-radius:6px;font-weight:600">Ch ${ch.ch}</span>
                        <span style="font-size:.75rem;color:var(--dim)">${ch.name}</span>
                    </div>
                    <div style="font-weight:700;font-size:.95rem;margin-bottom:4px">${t.name}</div>
                    <div style="font-size:.8rem;color:var(--dim)">${t.short}</div>
                </a>`;
            });
            grid.innerHTML = html;
        }

        // Choice selection
        function selectChoice(el, correctIdx) {
            const parent = el.closest('.q');
            const rows = parent.querySelectorAll('.choice-row');
            const selectedIdx = parseInt(el.dataset.idx);

            // Already answered
            if (parent.dataset.answered) return;
            parent.dataset.answered = 'true';

            rows.forEach((r, i) => {
                r.style.pointerEvents = 'none';
                if (i === correctIdx) {
                    r.style.background = 'rgba(16,185,129,.12)';
                    r.style.borderLeft = '3px solid #10b981';
                    r.style.fontWeight = '600';
                } else if (i === selectedIdx && selectedIdx !== correctIdx) {
                    r.style.background = 'rgba(239,68,68,.08)';
                    r.style.borderLeft = '3px solid #ef4444';
                    r.style.opacity = '.7';
                    r.style.textDecoration = 'line-through';
                }
            });
        }

        // Boot
        if (unitId) {
            const unit = findUnit(unitId);
            if (unit) renderUnit(unit);
            else showGrid();
        } else {
            showGrid();
        }
    </script>
    <script src="../Cì–¸ì–´/submit.js"></script>
    <script src="../platform.js"></script>

</body>

</html>