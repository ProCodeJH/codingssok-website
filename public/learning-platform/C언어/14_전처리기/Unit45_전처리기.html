<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Unit 45. 전처리기 — C 언어 코딩 도장</title>
    <link rel="stylesheet" href="../common.css">
</head>

<body>
    <div class="wrap">
        <div class="hdr">
            <h1>Unit 45. 전처리기</h1>
            <div class="sub">#define · #include · #ifdef · 매크로 함수</div>
            <span class="unit-badge">Chapter 14 · 전처리기</span>
            <div class="level-bar"><span class="on"></span><span class="on"></span><span class="on"></span></div>
            <div class="meta"><span class="tag pri">🖥️ C언어</span><span class="tag acc">📝 15문제</span><span
                    class="tag">⏱ 25~35분</span></div>
        </div>
        <div class="stu-bar"><label>👤 이름 <input type="text" id="stu-name" placeholder="이름"></label><label>📅 날짜 <input
                    type="date" id="stu-date"></label></div>
        <div class="learn">
            <h2><span class="ico" style="background:rgba(245,158,11,.15)">⚙️</span> 전처리기 = 컴파일 전 텍스트 치환</h2>
            <p><code>#</code>으로 시작하는 지시자. 컴파일러가 코드를 읽기 전에 먼저 처리!</p>
        </div>
        <div id="problems"></div>
        <div class="submit-section">
            <p>모든 문제를 풀었나요? 📨</p><button class="btn-submit" id="btn-submit">📄 제출하기</button>
        </div>
        <div class="modal-overlay" id="submit-modal">
            <div class="modal-box">
                <div class="modal-icon">✅</div>
                <h3>제출 완료!</h3>
                <p>학습지가 저장되었습니다.</p>
                <div style="margin:12px 0"><span class="info-tag" id="modal-name"></span> <span class="info-tag"
                        id="modal-date"></span> <span class="info-tag" id="modal-count"></span></div>
                <p style="font-size:.78rem;color:var(--dim)">📁 <strong id="modal-filename"></strong></p><button
                    class="btn-close-modal" id="btn-close-modal">확인</button>
            </div>
        </div>
        <div class="pg"><a href="../13_파일입출력/Unit44_파일열기.html">← Unit 44</a><span class="tag active">Unit 45</span><a
                href="Unit46_헤더파일.html">Unit 46 →</a></div>
        <div class="ft">🖥️ C 언어 코딩 도장 · Unit 45 · 전처리기</div>
    </div>
    <script>
        const P = [
            {
                n: 1, t: "#include", d: 1,
                q: `두 가지 include 방식의 차이는?<pre class="code-c">#include &lt;stdio.h&gt;   <span class="cm">// ?</span>
#include "myheader.h" <span class="cm">// ?</span></pre>`,
                a: `<span class="key">정답</span><div class="trace">&lt;stdio.h&gt; → <span class="val">시스템 헤더 파일</span> (표준 라이브러리)<br>"myheader.h" → <span class="val">사용자 헤더 파일</span> (현재 디렉토리)<br><br>&lt;&gt;: 시스템 경로에서 검색<br>"": 현재 폴더 → 시스템 경로 순서로 검색</div>`
            },

            {
                n: 2, t: "#define 상수", d: 1,
                q: `다음 코드의 출력을 쓰세요.<pre class="code-c">#define PI 3.14159
#define MAX 100

printf("%.2f\\n", PI);
printf("%d\\n", MAX + 1);</pre>`,
                a: `<span class="key">정답</span><div class="output-box">3.14<br>101</div><div class="trace">#define NAME VALUE → 텍스트 치환!<br>PI가 3.14159로, MAX가 100으로 대체됨<br><br><span class="val">세미콜론(;) 붙이지 않음!</span></div>`
            },

            {
                n: 3, t: "#define 매크로 함수", d: 2,
                q: `매크로 함수를 만드세요.<pre class="code-c">#define MAX(a,b) ((a)>(b)?(a):(b))
#define SQR(x) ((x)*(x))

printf("%d\\n", MAX(3,7));
printf("%d\\n", SQR(5));</pre>`,
                a: `<span class="key">정답</span><div class="output-box">7<br>25</div><div class="trace">매크로 = 텍스트 치환 (함수 아님!)<br><span class="err">괄호를 꼭 써야 안전!</span></div>`
            },

            {
                n: 4, t: "매크로 함수 주의점", d: 3,
                q: `다음 코드의 문제점은?<pre class="code-c">#define SQR(x) x*x
printf("%d\\n", SQR(3+2));</pre>`,
                a: `<span class="key">정답</span><div class="trace">기대: (3+2)² = 25<br>실제: 3+2*3+2 = 3+6+2 = <span class="err">11</span>!<br><br>텍스트 치환이므로 SQR(3+2) → 3+2*3+2<br><br>해결: <span class="val">#define SQR(x) ((x)*(x))</span><br>→ ((3+2)*(3+2)) = 25</div>`
            },

            {
                n: 5, t: "#ifdef / #endif", d: 2,
                q: `조건부 컴파일을 설명하세요.<pre class="code-c">#define DEBUG

#ifdef DEBUG
    printf("디버그 모드\\n");
#else
    printf("릴리즈 모드\\n");
#endif</pre>`,
                a: `<span class="key">정답</span><div class="output-box">디버그 모드</div><div class="trace">#ifdef: 매크로가 정의되어 있으면 컴파일<br>#ifndef: 정의되어 있지 않으면 컴파일<br>#else/#elif: 조건 분기<br>#endif: 조건부 컴파일 끝</div>`
            },

            {
                n: 6, t: "#ifndef 인클루드 가드", d: 2,
                q: `인클루드 가드(헤더 가드)를 설명하세요.<pre class="code-c"><span class="cm">// myheader.h</span>
#ifndef MYHEADER_H
#define MYHEADER_H

<span class="cm">// 선언들...</span>
int add(int a, int b);

#endif</pre>`,
                a: `<span class="key">정답</span><div class="trace">같은 헤더파일이 여러 번 include되면<br> 중복 선언 에러! 이를 방지:<br><br>첫 include: MYHEADER_H 미정의 → 내용 포함<br>두번째: MYHEADER_H 이미 정의 → <span class="val">건너뜀!</span></div>`
            },

            {
                n: 7, t: "#undef", d: 2,
                q: `매크로 정의를 취소하세요.`,
                a: `<span class="key">정답</span><pre class="code-c">#define SIZE 10
printf("%d\\n", SIZE);  <span class="cm">// 10</span>

#undef SIZE
#define SIZE 20
printf("%d\\n", SIZE);  <span class="cm">// 20</span></pre>`},

            {
                n: 8, t: "미리 정의된 매크로", d: 2,
                q: `컴파일러가 자동으로 정의하는 매크로를 쓰세요.`,
                a: `<span class="key">정답</span><pre class="code-c">printf("파일: %s\\n", __FILE__);
printf("줄: %d\\n", __LINE__);
printf("날짜: %s\\n", __DATE__);
printf("시간: %s\\n", __TIME__);
printf("함수: %s\\n", __func__);</pre>`},

            {
                n: 9, t: "# 연산자 (문자열화)", d: 3,
                q: `# 연산자로 매크로 인자를 문자열로 바꾸세요.`,
                a: `<span class="key">정답</span><pre class="code-c">#define PRINT_VAR(x) printf(#x " = %d\\n", x)

int age = 15;
PRINT_VAR(age);  <span class="cm">// → printf("age" " = %d\\n", age)</span></pre><div class="output-box">age = 15</div><div class="trace">#x → "x" (문자열 리터럴로 변환)</div>`},

            {
                n: 10, t: "## 연산자 (토큰 연결)", d: 3,
                q: `## 연산자로 식별자를 연결하세요.`,
                a: `<span class="key">정답</span><pre class="code-c">#define VAR(n) var_##n

int VAR(1) = 10;  <span class="cm">// int var_1 = 10;</span>
int VAR(2) = 20;  <span class="cm">// int var_2 = 20;</span>
printf("%d %d\\n", var_1, var_2);</pre><div class="output-box">10 20</div>`},

            {
                n: 11, t: "심사: 디버그 매크로", d: 2,
                q: `디버그 로그 매크로를 만드세요.`,
                a: `<span class="key">정답</span><pre class="code-c">#define DEBUG 1

#if DEBUG
  #define LOG(msg) printf("[DEBUG] %s:%d: %s\\n", \\
                          __FILE__, __LINE__, msg)
#else
  #define LOG(msg)  <span class="cm">// 빈 매크로 (아무것도 안 함)</span>
#endif

LOG("시작");  <span class="cm">// 디버그 시에만 출력</span></pre>`},

            {
                n: 12, t: "심사: 다중 줄 매크로", d: 2,
                q: `여러 줄 매크로를 만드세요.`,
                a: `<span class="key">정답</span><pre class="code-c">#define SWAP(a, b) do { \\
    int temp = (a);     \\
    (a) = (b);          \\
    (b) = temp;         \\
} while(0)

int x=3, y=7;
SWAP(x, y); <span class="cm">// x=7, y=3</span></pre><div class="trace">do { ... } while(0) 패턴:<br>if문 안에서도 안전하게 사용 가능!</div>`},

            {
                n: 13, t: "심사: 조건부 플랫폼", d: 2,
                q: `운영체제별 조건부 컴파일을 쓰세요.`,
                a: `<span class="key">정답</span><pre class="code-c">#ifdef _WIN32
    printf("Windows\\n");
#elif __linux__
    printf("Linux\\n");
#elif __APPLE__
    printf("macOS\\n");
#else
    printf("Unknown\\n");
#endif</pre>`},

            {
                n: 14, t: "심사: static_assert", d: 3,
                q: `컴파일 타임에 조건을 검사하세요.`,
                a: `<span class="key">정답</span><pre class="code-c"><span class="cm">// C11</span>
#include &lt;assert.h&gt;
_Static_assert(sizeof(int) == 4,
    "int는 4바이트여야 합니다!");

<span class="cm">// 전처리기 버전:</span>
#if sizeof(int) != 4
#error "int는 4바이트여야 합니다!"
#endif</pre>`},

            {
                n: 15, t: "🏆 Unit 45 종합", d: 3,
                q: `다음 매크로의 출력을 쓰세요.<pre class="code-c">#define ARRAY_SIZE(a) (sizeof(a)/sizeof(a[0]))
#define CLAMP(x,lo,hi) ((x)<(lo)?(lo):((x)>(hi)?(hi):(x)))

int arr[] = {10,20,30,40,50};
printf("크기: %zu\\n", ARRAY_SIZE(arr));
printf("CLAMP: %d\\n", CLAMP(150, 0, 100));</pre>`,
                a: `<span class="key">정답</span><div class="output-box">크기: 5<br>CLAMP: 100</div><div class="trace">ARRAY_SIZE: 배열 요소 개수 계산!<br>CLAMP(150,0,100): 150>100 → 100<br><br>이 두 매크로는 실전에서 자주 사용!</div>`
            }
        ];
        const c = document.getElementById('problems'); P.forEach(p => { const dc = p.d <= 1 ? 'ez' : p.d <= 2 ? 'md' : 'hd'; const dots = Array.from({ length: 5 }, (_, i) => `<span${i < p.d ? ' class="on"' : ''}>​</span>`).join(''); c.innerHTML += `<div class="prob"><div class="prob-top"><div class="prob-num ${dc}">${p.n}</div><div class="prob-title">${p.t}</div><div class="diff-dots">${dots}</div></div><div class="prob-body"><div class="q">${p.q}</div><textarea class="write" placeholder="✍️ 답을 작성하세요"></textarea><details class="ans"><summary>정답 및 해설 보기</summary><div class="ans-body">${p.a}</div></details></div></div>`; });
    </script>
    <script src="../submit.js"></script>
    <script src="../../platform.js"></script>
</body>

</html>