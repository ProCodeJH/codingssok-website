/* ═══════════════════════════════════════════════════════════════
   KOI ARCHIVE — GOD-TIER DESIGN SYSTEM
   Linear / Vercel / Raycast 급 초고퀄리티
   ═══════════════════════════════════════════════════════════════ */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap');

*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0
}

:root {
    --f: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    --fm: 'JetBrains Mono', 'Fira Code', monospace;
    --r: 12px;
    --rs: 8px;
    --rl: 16px;
    --ease: cubic-bezier(.22, 1, .36, 1);
    --spring: cubic-bezier(.34, 1.56, .64, 1);
    --t: .18s var(--ease);
    --nav-h: 52px;
}

/* ─── DARK THEME ─── */
[data-theme="dark"] {
    --bg: #09090b;
    --bg2: #0f0f13;
    --bg3: #18181e;
    --bg4: #222230;
    --sf: #111117;
    --sf2: #16161e;
    --sfh: rgba(255, 255, 255, .028);
    --tx: #ececf1;
    --tx2: #8b8b9e;
    --tx3: #56566a;
    --bd: rgba(255, 255, 255, .055);
    --bdh: rgba(255, 255, 255, .09);
    --ac: #7c5cfc;
    --ac2: #9b85ff;
    --acs: rgba(124, 92, 252, .07);
    --acb: rgba(124, 92, 252, .15);
    --acg: rgba(124, 92, 252, .25);
    --gn: #34d399;
    --gns: rgba(52, 211, 153, .07);
    --gnb: rgba(52, 211, 153, .14);
    --cy: #22d3ee;
    --cys: rgba(34, 211, 238, .07);
    --cyb: rgba(34, 211, 238, .14);
    --rd: #fb7185;
    --rds: rgba(251, 113, 133, .07);
    --rdb: rgba(251, 113, 133, .14);
    --am: #fbbf24;
    --ams: rgba(251, 191, 36, .07);
    --amb: rgba(251, 191, 36, .14);
    --pp: #c084fc;
    --pps: rgba(192, 132, 252, .07);
    --star: #fbbf24;
    --star0: rgba(255, 255, 255, .06);
    --glass: rgba(14, 14, 20, .82);
    --glassBd: rgba(255, 255, 255, .06);
    --glow: 0 0 20px rgba(124, 92, 252, .15);
    --card-shadow: 0 1px 3px rgba(0, 0, 0, .4), 0 0 0 1px rgba(255, 255, 255, .04);
    --modal-shadow: 0 25px 65px rgba(0, 0, 0, .6), 0 0 0 1px rgba(255, 255, 255, .06);
    --float-shadow: 0 8px 32px rgba(0, 0, 0, .5), 0 0 0 1px rgba(255, 255, 255, .05);
    color-scheme: dark;
}

/* ─── LIGHT THEME ─── */
[data-theme="light"] {
    --bg: #fafafa;
    --bg2: #ffffff;
    --bg3: #f0f0f3;
    --bg4: #e4e4ea;
    --sf: #ffffff;
    --sf2: #f7f7f9;
    --sfh: rgba(0, 0, 0, .018);
    --tx: #18181b;
    --tx2: #71717a;
    --tx3: #a1a1aa;
    --bd: rgba(0, 0, 0, .055);
    --bdh: rgba(0, 0, 0, .09);
    --ac: #6d28d9;
    --ac2: #7c3aed;
    --acs: rgba(109, 40, 217, .05);
    --acb: rgba(109, 40, 217, .1);
    --acg: rgba(109, 40, 217, .18);
    --gn: #059669;
    --gns: rgba(5, 150, 105, .05);
    --gnb: rgba(5, 150, 105, .1);
    --cy: #0891b2;
    --cys: rgba(8, 145, 178, .05);
    --cyb: rgba(8, 145, 178, .1);
    --rd: #e11d48;
    --rds: rgba(225, 29, 72, .05);
    --rdb: rgba(225, 29, 72, .1);
    --am: #d97706;
    --ams: rgba(217, 119, 6, .05);
    --amb: rgba(217, 119, 6, .1);
    --pp: #9333ea;
    --pps: rgba(147, 51, 234, .05);
    --star: #d97706;
    --star0: rgba(0, 0, 0, .06);
    --glass: rgba(255, 255, 255, .85);
    --glassBd: rgba(0, 0, 0, .06);
    --glow: 0 0 20px rgba(109, 40, 217, .08);
    --card-shadow: 0 1px 3px rgba(0, 0, 0, .06), 0 0 0 1px rgba(0, 0, 0, .03);
    --modal-shadow: 0 25px 65px rgba(0, 0, 0, .12), 0 0 0 1px rgba(0, 0, 0, .06);
    --float-shadow: 0 8px 32px rgba(0, 0, 0, .08), 0 0 0 1px rgba(0, 0, 0, .04);
    color-scheme: light;
}

html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%
}

body {
    font-family: var(--f);
    background: var(--bg);
    color: var(--tx);
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    transition: background .5s var(--ease), color .3s;
}

/* ─── ATMOSPHERIC DEPTH ─── */
body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    background:
        radial-gradient(ellipse 60% 50% at 15% 20%, var(--acs) 0%, transparent 60%),
        radial-gradient(ellipse 50% 40% at 85% 10%, var(--pps) 0%, transparent 50%),
        radial-gradient(ellipse 40% 35% at 50% 85%, var(--cys) 0%, transparent 50%),
        radial-gradient(ellipse 30% 25% at 75% 60%, var(--gns) 0%, transparent 40%);
    opacity: .6;
    animation: ambientDrift 60s ease-in-out infinite alternate;
}

@keyframes ambientDrift {
    0% {
        transform: scale(1) translate(0, 0)
    }

    33% {
        transform: scale(1.02) translate(-0.5%, 1%)
    }

    66% {
        transform: scale(1.01) translate(0.5%, -0.5%)
    }

    100% {
        transform: scale(1) translate(-0.3%, 0.5%)
    }
}

body::after {
    content: '';
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    opacity: .015;
    mix-blend-mode: overlay;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.65' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    background-size: 200px;
}

/* ─── TYPOGRAPHY ─── */
h1,
h2,
h3 {
    letter-spacing: -.04em;
    font-weight: 800
}

.mono {
    font-family: var(--fm)
}

/* ─── SCROLLBAR ─── */
::-webkit-scrollbar {
    width: 6px;
    height: 6px
}

::-webkit-scrollbar-track {
    background: transparent
}

::-webkit-scrollbar-thumb {
    background: var(--bd);
    border-radius: 3px
}

::-webkit-scrollbar-thumb:hover {
    background: var(--bdh)
}

/* ─── ICON SYSTEM ─── */
.icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    vertical-align: middle;
    line-height: 1
}

.icon svg {
    width: 100%;
    height: 100%;
    display: block
}

/* ─── ANIMATIONS ─── */
@keyframes fadeUp {
    from {
        opacity: 0;
        transform: translateY(12px)
    }

    to {
        opacity: 1;
        transform: none
    }
}

@keyframes fadeIn {
    from {
        opacity: 0
    }

    to {
        opacity: 1
    }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(6px) scale(.998)
    }

    to {
        opacity: 1;
        transform: none
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(.96)
    }

    to {
        opacity: 1;
        transform: none
    }
}

@keyframes shimmer {
    0% {
        background-position: 200% 50%
    }

    100% {
        background-position: -200% 50%
    }
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1
    }

    50% {
        opacity: .55
    }
}

@keyframes gradShift {

    0%,
    100% {
        background-position: 0% 50%
    }

    50% {
        background-position: 100% 50%
    }
}

/* ═══ NAVIGATION ═══ */
.nav {
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    height: var(--nav-h);
    background: var(--glass);
    backdrop-filter: blur(24px) saturate(1.8);
    border-bottom: 1px solid var(--glassBd);
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: var(--tx)
}

.nav-logo {
    width: 28px;
    height: 28px;
    border-radius: 8px;
    background: linear-gradient(135deg, var(--ac), var(--pp), var(--cy));
    background-size: 200% 200%;
    animation: gradShift 6s ease-in-out infinite;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: .7rem;
    color: #fff;
    box-shadow: 0 2px 12px var(--acg);
    transition: transform .3s var(--spring);
}

.nav-logo:hover {
    transform: scale(1.08) rotate(-3deg)
}

.nav-name {
    font-weight: 700;
    font-size: .78rem;
    letter-spacing: -.02em
}

.nav-name span {
    font-weight: 400;
    color: var(--tx3);
    font-size: .58rem;
    margin-left: 6px
}

.nav-r {
    display: flex;
    align-items: center;
    gap: 3px
}

.kbd-hint {
    font-family: var(--fm);
    font-size: .55rem;
    font-weight: 500;
    padding: 4px 10px;
    border-radius: 7px;
    border: 1px solid var(--bd);
    background: var(--sfh);
    color: var(--tx3);
    cursor: pointer;
    transition: all var(--t);
    letter-spacing: .02em;
}

.kbd-hint:hover {
    border-color: var(--ac);
    color: var(--ac);
    background: var(--acs)
}

.nav-btn {
    background: none;
    border: 1px solid transparent;
    width: 34px;
    height: 34px;
    border-radius: 9px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all .2s var(--ease);
    color: var(--tx3);
}

.nav-btn:hover {
    background: var(--sfh);
    color: var(--tx);
    border-color: var(--bd);
    transform: translateY(-1px)
}

.nav-btn .icon {
    width: 16px;
    height: 16px
}

.nav-link {
    font-size: .6rem;
    font-weight: 500;
    color: var(--tx3);
    text-decoration: none;
    padding: 6px 10px;
    border-radius: 7px;
    transition: all var(--t);
    display: flex;
    align-items: center;
    gap: 4px;
}

.nav-link:hover {
    color: var(--tx);
    background: var(--sfh)
}

.nav-link .icon {
    width: 11px;
    height: 11px
}

.t-btn {
    background: none;
    border: 1px solid var(--bd);
    width: 34px;
    height: 34px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all .3s var(--ease);
    color: var(--tx3);
    margin-left: 4px;
}

.t-btn:hover {
    border-color: var(--ac);
    color: var(--ac);
    box-shadow: var(--glow)
}

.t-btn .icon {
    width: 15px;
    height: 15px
}

.theme-ripple {
    position: fixed;
    z-index: 9999;
    border-radius: 50%;
    width: 0;
    height: 0;
    pointer-events: none;
    transform: translate(-50%, -50%)
}

.theme-ripple.expand {
    width: calc(var(--max-r)*2.5);
    height: calc(var(--max-r)*2.5);
    transition: width .5s ease, height .5s ease
}

/* ═══ HEADER ═══ */
.hd {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 52px 24px 24px
}

.hd h1 {
    font-size: 2.4rem;
    font-weight: 900;
    letter-spacing: -.06em;
    animation: fadeUp .7s var(--ease)
}

.hd h1 span {
    background: linear-gradient(135deg, var(--ac2), var(--pp), var(--cy), var(--gn));
    background-size: 300% 300%;
    animation: gradShift 8s ease-in-out infinite;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hd-sub {
    color: var(--tx3);
    font-size: .72rem;
    margin-top: 4px;
    font-weight: 400;
    letter-spacing: -.01em;
    animation: fadeUp .7s .08s var(--ease) both
}

.hd-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 14px;
    margin-top: 28px;
    flex-wrap: wrap;
    animation: fadeUp .7s .16s var(--ease) both;
}

.metrics {
    display: flex;
    align-items: center;
    gap: 24px;
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glassBd);
    border-radius: var(--rl);
    padding: 16px 28px;
    box-shadow: var(--float-shadow);
}

.met {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px
}

.met-v {
    font-size: 1.6rem;
    font-weight: 900;
    font-family: var(--fm);
    letter-spacing: -.05em;
    line-height: 1
}

.met-l {
    font-size: .48rem;
    color: var(--tx3);
    text-transform: uppercase;
    letter-spacing: .1em;
    font-weight: 600
}

.data-btns {
    display: flex;
    gap: 4px;
    margin-left: 8px
}

.dbtn {
    font-size: .56rem;
    font-weight: 500;
    padding: 6px 12px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: transparent;
    color: var(--tx3);
    cursor: pointer;
    transition: all var(--t);
    display: flex;
    align-items: center;
    gap: 4px;
}

.dbtn:hover {
    border-color: var(--ac);
    color: var(--ac);
    transform: translateY(-1px);
    box-shadow: var(--glow)
}

.dbtn .icon {
    width: 12px;
    height: 12px
}

.streak {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: .65rem;
    font-weight: 500;
    color: var(--tx3);
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glassBd);
    padding: 10px 16px;
    border-radius: var(--rl);
    box-shadow: var(--card-shadow);
}

.streak .icon {
    width: 14px;
    height: 14px;
    color: var(--am)
}

/* ═══ HEATMAP ═══ */
.heatmap-wrap {
    position: relative;
    z-index: 1;
    max-width: 700px;
    margin: 14px auto;
    padding: 16px 20px;
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glassBd);
    border-radius: var(--rl);
    animation: fadeUp .7s .24s var(--ease) both;
    box-shadow: var(--card-shadow);
}

.heatmap-title {
    font-size: .5rem;
    color: var(--tx3);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: .1em;
    font-weight: 600
}

.heatmap {
    display: flex;
    gap: 3px;
    justify-content: center
}

.hm-col {
    display: flex;
    flex-direction: column;
    gap: 3px
}

.hm-cell {
    width: 11px;
    height: 11px;
    border-radius: 3px;
    background: var(--bg3);
    transition: all .15s var(--ease);
    cursor: default
}

.hm-cell:hover {
    transform: scale(1.6);
    z-index: 1;
    box-shadow: 0 0 0 2px currentColor
}

.hm-1 {
    background: var(--gns);
    color: var(--gn)
}

.hm-2 {
    background: var(--gnb);
    color: var(--gn)
}

.hm-3 {
    background: var(--gn);
    opacity: .55;
    color: var(--gn)
}

.hm-4 {
    background: var(--gn);
    color: var(--gn)
}

/* ═══ PROGRESS BARS ═══ */
.prog-ov {
    position: relative;
    z-index: 1;
    max-width: 700px;
    margin: 12px auto;
    display: flex;
    gap: 10px;
    padding: 0 16px;
    animation: fadeUp .7s .3s var(--ease) both
}

.prog-w {
    flex: 1
}

.prog-lbl {
    display: flex;
    justify-content: space-between;
    font-size: .5rem;
    color: var(--tx3);
    margin-bottom: 5px;
    font-weight: 600
}

.prog-tk {
    height: 4px;
    background: var(--bg3);
    border-radius: 2px;
    overflow: hidden
}

.prog-fl {
    height: 100%;
    border-radius: 2px;
    transition: width 1s var(--ease);
    background: linear-gradient(90deg, var(--ac), var(--ac2))
}

/* ═══ ACHIEVEMENTS ═══ */
.badges-bar {
    position: relative;
    z-index: 1;
    max-width: 700px;
    margin: 12px auto;
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    padding: 0 16px;
    animation: fadeUp .7s .36s var(--ease) both
}

.ach {
    padding: 5px 11px;
    border-radius: 20px;
    font-size: .55rem;
    font-weight: 500;
    border: 1px solid var(--bd);
    color: var(--tx3);
    background: var(--sf);
    transition: all .25s var(--ease);
    cursor: default;
    display: flex;
    align-items: center;
    gap: 5px;
    box-shadow: var(--card-shadow);
}

.ach .icon {
    width: 13px;
    height: 13px
}

.ach.unlocked {
    border-color: var(--am);
    color: var(--am);
    background: var(--ams);
    box-shadow: 0 0 0 1px rgba(251, 191, 36, .15), 0 4px 14px rgba(251, 191, 36, .08);
}

.ach:hover {
    transform: translateY(-2px) scale(1.02)
}

/* ═══ CONTROLS ═══ */
.ctrl {
    position: relative;
    z-index: 1;
    max-width: 900px;
    margin: 24px auto 10px;
    padding: 0 16px;
    animation: fadeUp .7s .4s var(--ease) both
}

.ctrl-in {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    padding: 10px 16px;
    border-radius: var(--rl);
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glassBd);
    box-shadow: var(--card-shadow);
}

.pills {
    display: flex;
    gap: 2px
}

.pill {
    font-size: .58rem;
    font-weight: 500;
    padding: 4px 11px;
    border-radius: 16px;
    border: 1px solid var(--bd);
    background: transparent;
    color: var(--tx3);
    cursor: pointer;
    transition: all var(--t);
    font-family: var(--fm);
}

.pill:hover {
    border-color: var(--bdh);
    color: var(--tx)
}

.pill.on {
    background: var(--acb);
    color: var(--ac);
    border-color: rgba(124, 92, 252, .25);
    box-shadow: 0 0 0 1px var(--acg)
}

.sep {
    color: var(--bd);
    font-size: .5rem;
    margin: 0 2px;
    user-select: none
}

.rand-btn {
    font-size: .58rem;
    font-weight: 500;
    padding: 5px 12px;
    border-radius: 16px;
    border: 1px solid var(--bd);
    background: transparent;
    color: var(--tx3);
    cursor: pointer;
    transition: all var(--t);
    display: flex;
    align-items: center;
    gap: 4px;
}

.rand-btn .icon {
    width: 12px;
    height: 12px
}

.rand-btn:hover {
    border-color: var(--ac);
    color: var(--ac);
    transform: translateY(-1px)
}

.sort-sel {
    font-size: .58rem;
    padding: 5px 10px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: var(--sf);
    color: var(--tx);
    cursor: pointer;
    outline: none;
    transition: all var(--t);
    font-family: var(--f);
}

.sort-sel:hover,
.sort-sel:focus {
    border-color: var(--ac)
}

.q-in {
    flex: 1;
    min-width: 100px;
    font-size: .68rem;
    padding: 7px 14px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: var(--sf);
    color: var(--tx);
    outline: none;
    transition: all .25s var(--ease);
    font-family: var(--f);
}

.q-in::placeholder {
    color: var(--tx3)
}

.q-in:focus {
    border-color: var(--ac);
    box-shadow: 0 0 0 3px var(--acs), var(--glow)
}

.cnt {
    font-size: .52rem;
    color: var(--tx3);
    font-family: var(--fm);
    white-space: nowrap;
    font-weight: 600
}

/* ═══ TABS ═══ */
.tabs {
    position: relative;
    z-index: 1;
    max-width: 900px;
    margin: 8px auto 0;
    display: flex;
    gap: 0;
    padding: 0 16px
}

.tab {
    padding: 10px 18px;
    font-size: .68rem;
    font-weight: 600;
    color: var(--tx3);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all var(--t);
    user-select: none;
}

.tab:hover {
    color: var(--tx)
}

.tab.on {
    color: var(--tx);
    border-color: var(--ac)
}

.tc {
    font-family: var(--fm);
    font-size: .46rem;
    margin-left: 5px;
    padding: 2px 6px;
    border-radius: 6px;
    background: var(--bg3);
    color: var(--tx3);
    font-weight: 600
}

.tab.on .tc {
    background: var(--acs);
    color: var(--ac)
}

.tab.t-초.on {
    color: var(--gn);
    border-color: var(--gn)
}

.tab.t-초.on .tc {
    background: var(--gns);
    color: var(--gn)
}

.tab.t-중.on {
    color: var(--cy);
    border-color: var(--cy)
}

.tab.t-중.on .tc {
    background: var(--cys);
    color: var(--cy)
}

.tab.t-고.on {
    color: var(--rd);
    border-color: var(--rd)
}

.tab.t-고.on .tc {
    background: var(--rds);
    color: var(--rd)
}

.tab-written.on {
    color: var(--am);
    border-color: var(--am)
}

.tab-written.on .tc {
    background: var(--ams);
    color: var(--am)
}

.tab-line {
    max-width: 900px;
    margin: 0 auto;
    border-top: 1px solid var(--bd)
}

.written-wrap {
    position: relative;
    z-index: 1
}

/* ═══ TABLE ═══ */
.tw {
    position: relative;
    z-index: 1;
    max-width: 900px;
    margin: 0 auto;
    padding: 14px 16px
}

.yg {
    margin-bottom: 12px;
    border: 1px solid var(--bd);
    border-radius: var(--rl);
    overflow: hidden;
    background: var(--sf);
    transition: all .3s var(--ease);
    box-shadow: var(--card-shadow);
}

.yg:hover {
    border-color: var(--bdh);
    box-shadow: var(--float-shadow);
    transform: translateY(-1px)
}

.yl {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 18px;
    background: var(--sf2);
    border-bottom: 1px solid var(--bd)
}

.yt {
    font-size: 1rem;
    font-weight: 900;
    font-family: var(--fm);
    letter-spacing: -.03em
}

.yr {
    font-size: .5rem;
    color: var(--tx3);
    background: var(--bg3);
    padding: 3px 9px;
    border-radius: 8px;
    font-weight: 600
}

.yp {
    flex: 1;
    max-width: 120px
}

.yp-tk {
    height: 3px;
    background: var(--bg3);
    border-radius: 2px;
    overflow: hidden
}

.yp-fl {
    height: 100%;
    background: linear-gradient(90deg, var(--ac), var(--ac2));
    border-radius: 2px;
    transition: width 1s var(--ease)
}

.yc {
    font-size: .52rem;
    color: var(--tx3);
    font-family: var(--fm);
    font-weight: 600
}

.pt {
    width: 100%;
    border-collapse: collapse
}

.pt thead th {
    text-align: left;
    font-size: .48rem;
    color: var(--tx3);
    padding: 9px 14px;
    text-transform: uppercase;
    letter-spacing: .08em;
    border-bottom: 1px solid var(--bd);
    font-weight: 700;
}

.pt tbody tr {
    border-bottom: 1px solid var(--bd);
    transition: all .15s var(--ease)
}

.pt tbody tr:last-child {
    border-bottom: none
}

.pt tbody tr:hover {
    background: var(--sfh)
}

.pt td {
    padding: 10px 14px;
    font-size: .7rem;
    vertical-align: middle
}

.pn {
    font-weight: 600;
    font-family: var(--fm);
    font-size: .68rem;
    letter-spacing: -.01em;
    display: block
}

/* Divisions */
.pd {
    display: flex;
    gap: 3px
}

.dv {
    font-size: .46rem;
    padding: 2px 8px;
    border-radius: 6px;
    font-weight: 700;
    letter-spacing: .02em
}

.dv-초 {
    background: var(--gns);
    color: var(--gn)
}

.dv-중 {
    background: var(--cys);
    color: var(--cy)
}

.dv-고 {
    background: var(--rds);
    color: var(--rd)
}

/* Links */
.lks {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    align-items: center
}

.lk {
    font-size: .52rem;
    font-weight: 500;
    padding: 5px 10px;
    border-radius: 7px;
    border: 1px solid var(--bd);
    background: transparent;
    color: var(--tx3);
    text-decoration: none;
    cursor: pointer;
    transition: all .2s var(--ease);
    white-space: nowrap;
    display: inline-flex;
    align-items: center;
    gap: 3px;
}

.lk:hover {
    border-color: var(--ac);
    color: var(--ac);
    transform: translateY(-1px);
    box-shadow: var(--glow)
}

.lk .icon {
    width: 11px;
    height: 11px
}

.lk-v {
    background: var(--acs);
    color: var(--ac);
    border-color: rgba(124, 92, 252, .15)
}

.lk-v:hover {
    background: var(--acb);
    border-color: rgba(124, 92, 252, .3)
}

.lk-s {
    color: var(--gn);
    border-color: rgba(52, 211, 153, .15);
    background: var(--gns)
}

.lk-s:hover {
    background: var(--gnb);
    border-color: rgba(52, 211, 153, .3)
}

.lk-o {
    color: var(--pp);
    border-color: rgba(192, 132, 252, .15);
    background: var(--pps)
}

.lk-sp {
    color: var(--cy);
    border-color: rgba(34, 211, 238, .15);
    background: var(--cys)
}

.lk-timer {
    color: var(--am);
    border-color: rgba(251, 191, 36, .15);
    background: var(--ams)
}

/* Status controls */
.sc {
    display: flex;
    align-items: center;
    gap: 5px;
    flex-wrap: wrap
}

.sb {
    width: 26px;
    height: 26px;
    border-radius: 7px;
    border: 1px solid var(--bd);
    background: transparent;
    cursor: pointer;
    color: var(--tx3);
    transition: all .2s var(--ease);
    display: flex;
    align-items: center;
    justify-content: center;
}

.sb:hover {
    border-color: var(--ac);
    transform: scale(1.12);
    box-shadow: var(--glow)
}

.sb .icon {
    width: 12px;
    height: 12px
}

.sb[data-on="done"] {
    background: var(--gns);
    color: var(--gn);
    border-color: rgba(52, 211, 153, .25)
}

.sb[data-on="wip"] {
    background: var(--ams);
    color: var(--am);
    border-color: rgba(251, 191, 36, .25)
}

/* Stars */
.stars {
    display: flex;
    gap: 1px;
    margin: 0 3px
}

.star {
    cursor: pointer;
    color: var(--star0);
    transition: all .15s var(--spring);
    user-select: none;
    display: inline-flex
}

.star:hover {
    transform: scale(1.35)
}

.star.lit {
    color: var(--star)
}

.star .icon {
    width: 12px;
    height: 12px
}

/* Memo btn */
.mb {
    width: 26px;
    height: 26px;
    border-radius: 7px;
    border: 1px solid var(--bd);
    background: transparent;
    cursor: pointer;
    color: var(--tx3);
    transition: all .2s var(--ease);
    display: flex;
    align-items: center;
    justify-content: center;
}

.mb .icon {
    width: 12px;
    height: 12px
}

.mb:hover {
    border-color: var(--ac);
    color: var(--ac);
    transform: scale(1.1)
}

.mb.has {
    background: var(--acs);
    color: var(--ac);
    border-color: rgba(124, 92, 252, .2)
}

/* Tags */
.tags {
    display: flex;
    gap: 3px;
    flex-wrap: wrap;
    margin-top: 4px
}

.tag {
    font-size: .45rem;
    padding: 2px 7px;
    border-radius: 6px;
    background: var(--bg3);
    color: var(--tx3);
    cursor: pointer;
    transition: all var(--t);
    font-weight: 500
}

.tag:hover {
    background: var(--rds);
    color: var(--rd)
}

.tag-add {
    background: var(--acs);
    color: var(--ac)
}

.tag-add:hover {
    background: var(--ac);
    color: #fff
}

.time-badge {
    font-size: .46rem;
    font-family: var(--fm);
    font-weight: 600;
    color: var(--am);
    background: var(--ams);
    padding: 3px 8px;
    border-radius: 6px;
    margin-top: 3px;
    display: inline-flex;
    align-items: center;
    gap: 3px;
}

.time-badge .icon {
    width: 10px;
    height: 10px
}

/* ═══ CARD VIEW ═══ */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 12px
}

.p-card {
    background: var(--sf);
    border: 1px solid var(--bd);
    border-radius: var(--rl);
    padding: 18px;
    transition: all .3s var(--ease);
    cursor: default;
    display: flex;
    flex-direction: column;
    gap: 8px;
    box-shadow: var(--card-shadow);
}

.p-card:hover {
    border-color: var(--bdh);
    transform: translateY(-4px);
    box-shadow: var(--float-shadow)
}

.p-card.card-done {
    border-left: 3px solid var(--gn)
}

.p-card.card-wip {
    border-left: 3px solid var(--am)
}

.card-top {
    display: flex;
    justify-content: space-between;
    align-items: center
}

.card-year {
    font-size: .52rem;
    color: var(--tx3);
    font-family: var(--fm);
    font-weight: 500
}

.card-st-icon {
    color: var(--gn)
}

.card-st-icon .icon {
    width: 14px;
    height: 14px
}

.card-name {
    font-size: .82rem;
    font-weight: 700;
    font-family: var(--fm);
    letter-spacing: -.02em
}

.card-divs {
    display: flex;
    gap: 3px
}

.card-stars {
    margin: -2px 0
}

.card-tags {
    margin: -2px 0
}

.card-actions {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    margin-top: auto
}

.card-status-btns {
    display: flex;
    gap: 3px;
    border-top: 1px solid var(--bd);
    padding-top: 8px;
    margin-top: 4px
}

.empty {
    text-align: center;
    padding: 64px;
    color: var(--tx3);
    font-size: .72rem;
    position: relative;
    z-index: 1
}

/* ═══ VIEWER ═══ */
.viewer {
    position: fixed;
    inset: 0;
    z-index: 200;
    background: var(--bg);
    display: none;
    flex-direction: column
}

.viewer.on {
    display: flex
}

.vbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px;
    height: 44px;
    background: var(--sf2);
    border-bottom: 1px solid var(--bd);
    flex-shrink: 0
}

.vbar-r {
    display: flex;
    align-items: center;
    gap: 6px
}

.vt {
    font-size: .68rem;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 50vw
}

.vb {
    font-size: .56rem;
    font-weight: 500;
    padding: 6px 12px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: transparent;
    color: var(--tx3);
    cursor: pointer;
    text-decoration: none;
    transition: all var(--t);
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.vb .icon {
    width: 12px;
    height: 12px
}

.vb:hover {
    border-color: var(--ac);
    color: var(--ac)
}

.viewer-frames {
    flex: 1;
    display: flex;
    position: relative;
    overflow: hidden
}

.vf {
    flex: 1;
    border: none;
    width: 100%;
    height: 100%
}

.vf2 {
    display: none;
    border-left: 2px solid var(--ac)
}

.viewer.split .vf {
    flex: 1
}

.viewer.split .vf2 {
    display: block;
    flex: 1
}

/* ─── Viewer Answer Panel (split-ans mode) ─── */
.vf-ans {
    display: none;
    flex-direction: column;
    width: 380px;
    min-width: 320px;
    max-width: 45vw;
    border-left: 2px solid var(--ac);
    background: var(--sf);
    overflow-y: auto;
}

.viewer.split-ans .vf-ans {
    display: flex;
}

.viewer.split-ans .vf2 {
    display: none;
}

.vf-ans-inner {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 14px;
    flex: 1;
}

.vf-ans-section {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.vf-ans-area {
    min-height: 120px;
    flex: 1;
    resize: vertical;
    font-size: .78rem;
    line-height: 1.7;
}

.vf-ans-code {
    min-height: 90px;
    resize: vertical;
    font-family: var(--fm);
    font-size: .72rem;
    line-height: 1.5;
}

.vf-ans-grade {
    display: flex;
    gap: 6px;
}

.vf-ans-grade .ans-grade-btn {
    flex: 1;
    padding: 8px 10px;
    font-size: .68rem;
}

.vf-ans-status {
    font-size: .65rem;
    font-weight: 600;
    text-align: center;
    padding: 4px;
    border-radius: var(--rs);
}

.vf-ans-status.correct {
    color: var(--gn);
    background: var(--gns);
}

.vf-ans-status.wrong {
    color: var(--rd);
    background: var(--rds);
}

.vf-ans-save {
    width: 100%;
    margin-top: auto;
}

.vb-ans.active {
    background: var(--acb);
    border-color: var(--ac);
    color: var(--ac);
}

/* Timer */
.timer-display {
    display: flex;
    align-items: center;
    gap: 5px;
    background: var(--ams);
    padding: 5px 12px;
    border-radius: var(--rs);
    font-family: var(--fm);
    font-size: .65rem;
    color: var(--am);
    animation: pulse 2s infinite
}

.timer-display .icon {
    width: 14px;
    height: 14px
}

.timer-time {
    font-weight: 700;
    min-width: 50px
}

.timer-stop {
    background: var(--rds);
    border: 1px solid rgba(251, 113, 133, .2);
    color: var(--rd);
    width: 22px;
    height: 22px;
    border-radius: 5px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--t)
}

.timer-stop .icon {
    width: 10px;
    height: 10px
}

.timer-stop:hover {
    background: var(--rd);
    color: #fff
}

/* ═══ MODALS (unified) ═══ */
.mm-bg,
.cmd-bg,
.stats-bg,
.cmp-bg {
    position: fixed;
    inset: 0;
    z-index: 300;
    background: rgba(0, 0, 0, .5);
    backdrop-filter: blur(16px) saturate(1.2);
    display: none;
    align-items: center;
    justify-content: center;
}

.mm-bg.on,
.cmd-bg.on,
.stats-bg.on,
.cmp-bg.on {
    display: flex
}

.mm {
    width: 92%;
    max-width: 500px;
    background: var(--sf);
    border: 1px solid var(--glassBd);
    border-radius: 18px;
    overflow: hidden;
    animation: scaleIn .25s var(--ease);
    box-shadow: var(--modal-shadow);
}

.mm-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid var(--bd)
}

.mm-bar span {
    font-weight: 700;
    font-size: .78rem;
    display: flex;
    align-items: center;
    gap: 7px;
    letter-spacing: -.01em
}

.mm-bar .icon {
    width: 16px;
    height: 16px;
    color: var(--ac)
}

.mm-cb {
    background: none;
    border: 1px solid var(--bd);
    width: 30px;
    height: 30px;
    border-radius: 9px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--t);
    color: var(--tx3);
}

.mm-cb .icon {
    width: 14px;
    height: 14px
}

.mm-cb:hover {
    background: var(--rds);
    color: var(--rd);
    border-color: rgba(251, 113, 133, .2)
}

.mm-tx {
    width: 100%;
    min-height: 160px;
    padding: 16px 20px;
    border: none;
    background: transparent;
    color: var(--tx);
    font-family: var(--fm);
    font-size: .68rem;
    resize: vertical;
    outline: none;
    line-height: 1.8
}

.mm-ft {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 20px;
    border-top: 1px solid var(--bd)
}

.mm-hint {
    font-size: .5rem;
    color: var(--tx3)
}

.mm-sv {
    font-size: .62rem;
    font-weight: 600;
    padding: 7px 20px;
    border-radius: var(--rs);
    border: none;
    background: linear-gradient(135deg, var(--ac), var(--ac2));
    color: #fff;
    cursor: pointer;
    transition: all .2s var(--ease);
    box-shadow: 0 2px 10px var(--acg);
}

.mm-sv:hover {
    opacity: .92;
    transform: translateY(-1px);
    box-shadow: 0 4px 16px var(--acg)
}

/* ═══ COMMAND PALETTE ═══ */
.cmd-bg {
    z-index: 400;
    align-items: flex-start;
    padding-top: 16vh
}

.cmd {
    width: 92%;
    max-width: 540px;
    background: var(--sf);
    border: 1px solid var(--glassBd);
    border-radius: 18px;
    overflow: hidden;
    box-shadow: var(--modal-shadow);
    animation: scaleIn .2s var(--ease);
}

.cmd-in {
    width: 100%;
    padding: 16px 22px;
    border: none;
    background: transparent;
    color: var(--tx);
    font-size: .8rem;
    outline: none;
    font-family: var(--f);
    border-bottom: 1px solid var(--bd)
}

.cmd-in::placeholder {
    color: var(--tx3)
}

.cmd-list {
    max-height: 320px;
    overflow-y: auto
}

.cmd-item {
    padding: 11px 22px;
    font-size: .68rem;
    cursor: pointer;
    transition: all .12s var(--ease);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.cmd-item:hover,
.cmd-item.sel {
    background: var(--sfh)
}

.cmd-item.sel {
    background: var(--acs)
}

.ci-key {
    font-size: .58rem;
    color: var(--tx3);
    font-family: var(--fm);
    display: flex;
    align-items: center
}

.ci-key .icon {
    width: 14px;
    height: 14px
}

.cmd-empty {
    padding: 28px;
    text-align: center;
    color: var(--tx3);
    font-size: .68rem
}

/* ═══ STATS DASHBOARD ═══ */
.stats-bg {
    z-index: 350
}

.stats-modal {
    width: 94%;
    max-width: 720px;
    max-height: 85vh;
    background: var(--sf);
    border: 1px solid var(--glassBd);
    border-radius: 18px;
    overflow: hidden;
    animation: scaleIn .3s var(--ease);
    display: flex;
    flex-direction: column;
    box-shadow: var(--modal-shadow);
}

.stats-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid var(--bd)
}

.stats-bar span {
    font-weight: 700;
    font-size: .82rem;
    display: flex;
    align-items: center;
    gap: 7px
}

.stats-bar .icon {
    width: 16px;
    height: 16px;
    color: var(--ac)
}

.stats-content {
    overflow-y: auto;
    padding: 20px;
    flex: 1
}

.stat-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 14px
}

.stat-card {
    background: var(--sf2);
    border: 1px solid var(--bd);
    border-radius: var(--rl);
    padding: 20px;
    box-shadow: var(--card-shadow);
}

.stat-card h3 {
    font-size: .52rem;
    color: var(--tx3);
    text-transform: uppercase;
    letter-spacing: .08em;
    margin-bottom: 16px;
    font-weight: 700
}

.stat-card-main {
    display: flex;
    flex-direction: column;
    align-items: center
}

.stat-card-wide {
    grid-column: 1/-1
}

.stat-donut {
    width: 140px;
    height: 140px;
    margin: 0 auto 12px
}

.stat-legend {
    display: flex;
    gap: 14px;
    justify-content: center;
    flex-wrap: wrap
}

.stat-leg-item {
    font-size: .52rem;
    color: var(--tx3);
    display: flex;
    align-items: center;
    gap: 4px;
    font-weight: 500
}

.stat-leg-item i {
    width: 8px;
    height: 8px;
    border-radius: 2.5px;
    display: inline-block
}

.stat-bar-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 7px
}

.stat-bar-label {
    font-size: .55rem;
    font-family: var(--fm);
    color: var(--tx3);
    min-width: 36px;
    text-align: right;
    font-weight: 600
}

.stat-bar-track {
    flex: 1;
    height: 5px;
    background: var(--bg3);
    border-radius: 3px;
    overflow: hidden
}

.stat-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--ac), var(--ac2));
    border-radius: 3px;
    transition: width 1s var(--ease)
}

.stat-bar-star .stat-bar-fill {
    background: linear-gradient(90deg, var(--am), var(--star))
}

.stat-bar-val {
    font-size: .5rem;
    font-family: var(--fm);
    color: var(--tx3);
    min-width: 35px;
    font-weight: 600
}

.stat-divs {
    display: flex;
    justify-content: space-around;
    padding: 12px 0
}

.stat-div {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px
}

.stat-div-ring {
    width: 68px;
    height: 68px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center
}

.stat-div-ring span {
    font-size: .7rem;
    font-weight: 900;
    background: var(--sf);
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--fm)
}

.stat-div-name {
    font-size: .52rem;
    color: var(--tx3);
    font-weight: 600
}

.stat-time-grid {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    justify-content: center
}

.stat-time-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    flex: 1;
    min-width: 70px
}

.stat-time-val {
    font-size: 1rem;
    font-weight: 900;
    font-family: var(--fm);
    color: var(--am)
}

.stat-time-label {
    font-size: .46rem;
    color: var(--tx3);
    font-weight: 600
}

/* ═══ COMPARE ═══ */
.cmp-bg {
    z-index: 350
}

.cmp-modal {
    width: 92%;
    max-width: 560px;
    max-height: 78vh;
    background: var(--sf);
    border: 1px solid var(--glassBd);
    border-radius: 18px;
    overflow: hidden;
    animation: scaleIn .3s var(--ease);
    display: flex;
    flex-direction: column;
    box-shadow: var(--modal-shadow)
}

.cmp-content {
    overflow-y: auto;
    padding: 16px;
    flex: 1
}

.cmp-table {
    width: 100%;
    border-collapse: collapse;
    font-size: .62rem
}

.cmp-table th {
    text-align: left;
    padding: 7px 12px;
    border-bottom: 1px solid var(--bd);
    color: var(--tx3);
    font-size: .48rem;
    text-transform: uppercase;
    letter-spacing: .06em;
    font-weight: 700
}

.cmp-table td {
    padding: 7px 12px;
    border-bottom: 1px solid var(--bd)
}

.cmp-win {
    background: var(--gns)
}

.cmp-lose {
    background: var(--rds)
}

.cmp-same {
    text-align: center;
    color: var(--tx3);
    padding: 28px
}

/* ═══ CONTEST SIMULATION ═══ */
.sim-bar {
    position: fixed;
    top: var(--nav-h);
    left: 0;
    right: 0;
    z-index: 99;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 24px;
    background: var(--glass);
    backdrop-filter: blur(24px);
    border-bottom: 2px solid var(--am);
    animation: slideUp .3s var(--ease);
    box-shadow: 0 4px 20px var(--amb);
}

.sim-label {
    font-size: .68rem;
    font-weight: 700;
    color: var(--am)
}

.sim-problems {
    display: flex;
    gap: 4px;
    flex: 1;
    flex-wrap: wrap
}

.sim-time {
    font-family: var(--fm);
    font-size: 1.1rem;
    font-weight: 900;
    color: var(--am);
    min-width: 60px;
    text-align: center;
    animation: pulse 2s infinite
}

.sim-end {
    font-size: .55rem;
    font-weight: 600;
    padding: 6px 14px;
    border-radius: var(--rs);
    border: 1px solid rgba(251, 113, 133, .2);
    background: var(--rds);
    color: var(--rd);
    cursor: pointer;
    transition: all var(--t);
    display: flex;
    align-items: center;
    gap: 4px;
}

.sim-end .icon {
    width: 12px;
    height: 12px
}

.sim-end:hover {
    background: var(--rd);
    color: #fff
}

/* ═══ CODE EDITOR ═══ */
.code-modal {
    max-width: 640px
}

.code-area {
    font-family: var(--fm) !important;
    font-size: .65rem !important;
    min-height: 320px;
    tab-size: 4;
    line-height: 1.8
}

/* ═══ REVIEW / PLAN / SHORTCUTS ═══ */
.review-content {
    padding: 14px 20px;
    max-height: 340px;
    overflow-y: auto
}

.rev-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 11px 14px;
    border-bottom: 1px solid var(--bd);
    cursor: pointer;
    transition: all .15s var(--ease);
    border-radius: var(--rs);
    margin-bottom: 2px
}

.rev-item:hover {
    background: var(--sfh);
    transform: translateX(3px)
}

.rev-name {
    font-size: .68rem;
    font-weight: 600;
    font-family: var(--fm)
}

.rev-days {
    font-size: .52rem;
    font-weight: 600;
    color: var(--cy);
    background: var(--cys);
    padding: 3px 10px;
    border-radius: 6px
}

.contest-setup {
    padding: 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 14px;
    align-items: flex-end
}

.contest-setup label {
    font-size: .58rem;
    font-weight: 600;
    color: var(--tx3);
    display: flex;
    flex-direction: column;
    gap: 5px
}

.contest-setup select,
.contest-setup input[type=number] {
    padding: 8px 12px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: var(--sf2);
    color: var(--tx);
    font-size: .68rem;
    font-family: var(--fm);
    outline: none;
    transition: all var(--t)
}

.contest-setup select:focus,
.contest-setup input:focus {
    border-color: var(--ac);
    box-shadow: 0 0 0 3px var(--acs)
}

.plan-body {
    padding: 20px
}

.plan-goal-row {
    display: flex;
    align-items: flex-end;
    gap: 12px;
    margin-bottom: 20px
}

.plan-goal-row label {
    font-size: .58rem;
    font-weight: 600;
    color: var(--tx3);
    display: flex;
    flex-direction: column;
    gap: 5px
}

.plan-goal-row input {
    padding: 8px 12px;
    border-radius: var(--rs);
    border: 1px solid var(--bd);
    background: var(--sf2);
    color: var(--tx);
    font-size: .68rem;
    font-family: var(--fm);
    width: 64px;
    outline: none
}

#planProgress {
    display: flex;
    align-items: center;
    gap: 24px;
    justify-content: center
}

.plan-ring {
    width: 84px;
    height: 84px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center
}

.plan-ring span {
    font-size: .82rem;
    font-weight: 900;
    background: var(--sf);
    width: 58px;
    height: 58px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--fm)
}

.plan-info {
    display: flex;
    flex-direction: column;
    gap: 4px
}

.plan-pct {
    font-size: 1.1rem;
    font-weight: 900;
    color: var(--gn)
}

.plan-left {
    font-size: .55rem;
    color: var(--tx3);
    font-weight: 500
}

.shortcuts-list {
    padding: 16px 20px
}

.sc-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 9px 0;
    border-bottom: 1px solid var(--bd)
}

.sc-row:last-child {
    border-bottom: none
}

.sc-row kbd {
    font-family: var(--fm);
    font-size: .55rem;
    font-weight: 500;
    padding: 4px 12px;
    border-radius: 6px;
    border: 1px solid var(--bd);
    background: var(--sf2);
    color: var(--tx);
    min-width: 64px;
    text-align: center
}

.sc-row span {
    font-size: .68rem;
    color: var(--tx2)
}

/* ═══ SEARCH HIGHLIGHT ═══ */
mark.hl {
    background: var(--amb);
    color: var(--am);
    border-radius: 2px;
    padding: 0 2px
}

.timeline-svg {
    width: 100%;
    max-height: 120px
}

/* ═══ TOAST ═══ */
.toast-wrap {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 500;
    display: flex;
    flex-direction: column;
    gap: 6px
}

.toast {
    padding: 12px 18px;
    border-radius: 10px;
    font-size: .65rem;
    font-weight: 500;
    color: var(--tx);
    background: var(--glass);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glassBd);
    animation: slideUp .25s var(--ease);
    box-shadow: var(--float-shadow);
}

.toast-gn {
    border-color: rgba(52, 211, 153, .2);
    background: var(--gns);
    color: var(--gn)
}

.toast-am {
    border-color: rgba(251, 191, 36, .2);
    background: var(--ams);
    color: var(--am)
}

.toast-cy {
    border-color: rgba(34, 211, 238, .2);
    background: var(--cys);
    color: var(--cy)
}

/* Confetti */
.confetti {
    position: absolute;
    pointer-events: none
}

.confetti i {
    position: absolute;
    display: block;
    animation: confFall .8s ease-out forwards
}

@keyframes confFall {
    0% {
        transform: translateY(0) rotate(0) scale(1);
        opacity: 1
    }

    100% {
        transform: translateY(-120px) rotate(720deg) scale(.3);
        opacity: 0
    }
}

/* Scroll top */
.scroll-top {
    position: fixed;
    bottom: 28px;
    left: 28px;
    z-index: 100;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    border: 1px solid var(--glassBd);
    background: var(--glass);
    backdrop-filter: blur(20px);
    color: var(--tx3);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all .3s var(--ease);
    opacity: 0;
    transform: translateY(12px);
    pointer-events: none;
    box-shadow: var(--float-shadow);
}

.scroll-top .icon {
    width: 16px;
    height: 16px
}

.scroll-top.show {
    opacity: 1;
    transform: none;
    pointer-events: auto
}

.scroll-top:hover {
    border-color: var(--ac);
    color: var(--ac);
    transform: translateY(-2px)
}

/* Footer */
.ft {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 40px 16px;
    margin-top: 32px;
    border-top: 1px solid var(--bd);
    color: var(--tx3);
    font-size: .52rem
}

.ft a {
    color: var(--ac);
    text-decoration: none;
    font-weight: 500
}

.ft a:hover {
    text-decoration: underline
}

.ft p+p {
    margin-top: 4px
}

/* ═══ RESPONSIVE ═══ */
@media(max-width:640px) {
    .hd h1 {
        font-size: 1.6rem
    }

    .metrics {
        flex-wrap: wrap;
        justify-content: center;
        padding: 12px 16px;
        gap: 16px
    }

    .ctrl-in {
        padding: 8px 10px
    }

    .stat-grid {
        grid-template-columns: 1fr
    }

    .card-grid {
        grid-template-columns: repeat(auto-fill, minmax(170px, 1fr))
    }

    .tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none
    }

    .tabs::-webkit-scrollbar {
        display: none
    }

    .nav {
        padding: 0 12px
    }

    .nav-r {
        gap: 1px
    }

    .nav-name span {
        display: none
    }
}

/* Print */
@media print {

    .nav,
    .ctrl,
    .tabs,
    .tab-line,
    .heatmap-wrap,
    .prog-ov,
    .badges-bar,
    .viewer,
    .mm-bg,
    .cmd-bg,
    .stats-bg,
    .cmp-bg,
    .toast-wrap,
    .scroll-top,
    .ft,
    .hd-row,
    .sim-bar {
        display: none !important
    }

    body {
        background: #fff;
        color: #000
    }

    body::before,
    body::after {
        display: none
    }
}

/* ═══ BOOKMARK BUTTON ═══ */
.bm-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--tx3);
    padding: 2px;
    transition: all .15s var(--ease);
    border-radius: 4px;
    display: inline-flex;
    align-items: center
}

.bm-btn:hover {
    color: var(--am);
    transform: scale(1.15)
}

.bm-btn.active {
    color: var(--am);
    filter: drop-shadow(0 0 4px rgba(251, 191, 36, .35))
}

/* ═══ TAG FILTER ═══ */
.tag-filter {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    position: relative
}

.tag-filter select {
    font-size: .65rem;
    padding: 4px 24px 4px 8px;
    border-radius: 6px;
    border: 1px solid var(--bd);
    background: var(--sf);
    color: var(--tx);
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%238b8b9e' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: calc(100% - 6px) center;
    transition: all .15s var(--ease);
    font-family: var(--f)
}

.tag-filter select:hover {
    border-color: var(--bdh);
    background-color: var(--sfh)
}

.tag-filter select:focus {
    outline: none;
    border-color: var(--ac);
    box-shadow: 0 0 0 3px var(--acs)
}

/* ═══ WRONG NOTE MODAL ═══ */
.wrong-modal {
    max-width: 560px
}

.wrong-body {
    padding: 16px 20px;
    display: flex;
    flex-direction: column;
    gap: 12px
}

.wrong-label {
    font-size: .58rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .1em;
    color: var(--tx3)
}

.wrong-area {
    min-height: 120px;
    resize: vertical;
    font-size: .78rem;
    line-height: 1.7
}

.wrong-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 4px
}

.wrong-tag {
    font-size: .55rem;
    padding: 3px 8px;
    border-radius: 4px;
    background: var(--rdb);
    color: var(--rd);
    cursor: pointer;
    transition: all .15s var(--ease)
}

.wrong-tag:hover {
    background: var(--rd);
    color: #fff
}

.wrong-tag-add {
    background: var(--sfh);
    color: var(--tx3);
    border: 1px dashed var(--bd)
}

.wrong-tag-add:hover {
    border-color: var(--ac);
    color: var(--ac)
}

.wrong-badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-size: .48rem;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--rdb);
    color: var(--rd);
    margin-left: 4px;
    vertical-align: middle
}

/* ═══ TAG STATS ═══ */
.tag-stat-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px
}

.tag-stat-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: .65rem;
    padding: 6px 10px;
    border-radius: var(--rs);
    background: var(--sf);
    border: 1px solid var(--bd)
}

.tag-stat-bar {
    height: 6px;
    border-radius: 3px;
    background: var(--ac);
    min-width: 8px;
    transition: width .4s var(--ease)
}

.tag-stat-name {
    font-weight: 600;
    color: var(--tx);
    min-width: 40px
}

.tag-stat-cnt {
    color: var(--tx3);
    font-size: .55rem
}

/* ═══ TIME GRAPH ═══ */
.time-graph-svg {
    width: 100%;
    max-height: 140px
}

/* ═══ SMART RECOMMEND BADGE ═══ */
.rec-badge {
    font-size: .5rem;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--acb);
    color: var(--ac);
    margin-left: 4px;
    vertical-align: middle;
    animation: recPulse 2s ease-in-out infinite
}

@keyframes recPulse {

    0%,
    100% {
        opacity: 1
    }

    50% {
        opacity: .6
    }
}

/* ═══ CODE EDITOR ENHANCED ═══ */
.code-area {
    font-family: var(--fm) !important;
    font-size: .72rem !important;
    line-height: 1.6 !important;
    tab-size: 4;
    -moz-tab-size: 4;
    letter-spacing: -.01em;
    padding: 16px !important
}

.code-area::selection {
    background: var(--acb)
}

.code-highlight-wrap {
    position: relative;
    overflow: hidden;
    border-radius: var(--rs)
}

.code-highlight-wrap pre {
    margin: 0;
    padding: 16px;
    font-family: var(--fm);
    font-size: .72rem;
    line-height: 1.6;
    overflow-x: auto;
    background: var(--bg2) !important;
    color: var(--tx) !important;
    border-radius: var(--rs);
    border: 1px solid var(--bd)
}

.code-highlight-wrap code {
    font-family: var(--fm);
    font-size: .72rem
}

.code-highlight-wrap .hljs-keyword {
    color: #c084fc
}

.code-highlight-wrap .hljs-string {
    color: #34d399
}

.code-highlight-wrap .hljs-number {
    color: #fbbf24
}

.code-highlight-wrap .hljs-comment {
    color: var(--tx3);
    font-style: italic
}

.code-highlight-wrap .hljs-function {
    color: #22d3ee
}

.code-highlight-wrap .hljs-built_in {
    color: #fb7185
}

.code-highlight-wrap .hljs-title {
    color: #7c5cfc
}

/* ═══ ENHANCED DARK MODE ═══ */
[data-theme="dark"] .nav {
    background: rgba(9, 9, 11, .92);
    backdrop-filter: blur(20px) saturate(1.8)
}

[data-theme="dark"] .viewer {
    background: rgba(9, 9, 11, .96)
}

[data-theme="dark"] .mm {
    box-shadow: var(--modal-shadow), 0 0 60px rgba(124, 92, 252, .04)
}

[data-theme="dark"] .pill.on {
    box-shadow: 0 0 12px var(--acs)
}

[data-theme="dark"] .yg {
    border-color: rgba(255, 255, 255, .03)
}

[data-theme="dark"] .tab.on {
    text-shadow: 0 0 20px var(--acs)
}

/* ═══ MOBILE RESPONSIVE ═══ */
@media (max-width: 768px) {
    .nav-r {
        gap: 4px
    }

    .nav-link,
    .kbd-hint {
        display: none
    }

    .hd h1 {
        font-size: 1.3rem
    }

    .hd-sub {
        font-size: .65rem
    }

    .ctrl-in {
        flex-wrap: wrap;
        gap: 6px
    }

    .pills {
        gap: 2px
    }

    .pill {
        font-size: .55rem;
        padding: 3px 8px
    }

    .q-in {
        width: 100%;
        min-width: 0
    }

    .tabs {
        gap: 2px;
        overflow-x: auto;
        flex-wrap: nowrap;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none
    }

    .tabs::-webkit-scrollbar {
        display: none
    }

    .tab {
        white-space: nowrap;
        font-size: .6rem;
        padding: 6px 10px
    }

    .pt th,
    .pt td {
        padding: 6px 4px;
        font-size: .6rem
    }

    .lks {
        flex-wrap: wrap;
        gap: 3px
    }

    .lk {
        font-size: .5rem;
        padding: 3px 6px
    }

    .sc {
        flex-direction: column;
        gap: 4px
    }

    .stars {
        justify-content: center
    }

    .prog-ov {
        grid-template-columns: 1fr
    }

    .metrics {
        flex-wrap: wrap;
        gap: 8px
    }

    .met {
        min-width: 60px
    }

    .heatmap-wrap {
        overflow-x: auto
    }

    .stat-grid {
        grid-template-columns: 1fr
    }

    .stat-card-wide {
        grid-column: 1
    }

    .card-grid {
        grid-template-columns: 1fr
    }

    .viewer-frames {
        flex-direction: column
    }

    .vf,
    .vf2 {
        width: 100%
    }

    .vbar {
        flex-wrap: wrap;
        gap: 4px
    }

    .vt {
        font-size: .7rem;
        max-width: 60vw;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap
    }

    .tag-filter {
        width: 100%
    }

    .tag-filter select {
        flex: 1
    }

    .sep {
        display: none
    }
}

@media (max-width: 480px) {
    .nav {
        padding: 0 10px
    }

    .nav-name span {
        display: none
    }

    .hd {
        padding: 24px 12px 12px
    }

    .ctrl {
        padding: 0 8px
    }

    .tw {
        padding: 0 8px
    }

    .yg {
        margin: 0 0 12px
    }

    .pt {
        font-size: .55rem
    }

    .data-btns {
        gap: 4px
    }

    .dbtn {
        font-size: .5rem;
        padding: 4px 8px
    }
}